<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-workflows/workflows-use-cases" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Examples & Use-cases | Torque</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://docs.qtorque.io/workflows/workflows-use-cases><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Examples & Use-cases | Torque"><meta data-rh=true name=description content="This example demonstrates a simple workflow that includes shell grains with dependencies."><meta data-rh=true property=og:description content="This example demonstrates a simple workflow that includes shell grains with dependencies."><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://docs.qtorque.io/workflows/workflows-use-cases><link data-rh=true rel=alternate href=https://docs.qtorque.io/workflows/workflows-use-cases hreflang=en><link data-rh=true rel=alternate href=https://docs.qtorque.io/workflows/workflows-use-cases hreflang=x-default><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://docs.qtorque.io/workflows/workflows-use-cases","name":"Examples & Use-cases","position":1}]}</script><script src=https://cdn.cookielaw.org/consent/31859194-4ed7-4958-bfc5-08046e0f6ab7/OtAutoBlock.js type=text/javascript></script><script src=https://cdn.cookielaw.org/scripttemplates/otSDKStub.js charset=UTF-8 type=text/javascript data-domain-script=31859194-4ed7-4958-bfc5-08046e0f6ab7></script><script src=http://docs.qtorque.io/one-trust.js type=text/javascript></script><link rel=stylesheet href=/assets/css/styles.51ff6c39.css><script src=/assets/js/runtime~main.0ea1b39a.js defer></script><script src=/assets/js/main.201b2323.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.png alt=Torque class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/img/logo-dm.png alt=Torque class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/QualiTorque/torque-docs/discussions/categories/announcements target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-announcments-link"></a><a href=https://github.com/QualiTorque/torque-docs target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class="navbar__search searchBarContainer_NW3z" dir=ltr><input placeholder=Search aria-label=Search class=navbar__search-input value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/>Welcome!</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href="/overview/The Torque Terminology">🌴 Torque Overview</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/getting-started/Resources-Inventory/cloud-resources>🚀 Getting Started</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/environment-services/drift-and-update>🔗 Environment Services</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href="/example-blueprints/Multi-Technology Orchestration">👀 Example Blueprints</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/blueprint-designer-guide/blueprint-quickstart-guide>📃 Blueprint Designer Guide</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/environment-as-code/environment-as-code-overview>☁ Environment As Code</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/workflows/workflows-overview>▶️ Workflows</a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/workflows/workflows-overview>Torque Workflows</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/workflows/workflows-use-cases>Examples & Use-cases</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/governance/roles-and-permissions>🌍 Governance</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/admin-guide/configurations>⭐ Administration</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/eco-system/integrations-overview>🤝 Integrations</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/torque-agent/Torque-Agent-Intro>⚙ Self-Hosted Agent</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/reports/reports-overview>📊 Reports</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/rest-api>🖥 REST API</a><button aria-label="Expand sidebar category '🖥 REST API'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/privacy>🔐 Privacy</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/help/how-to-use-the-kb>🔎 Need Help?</a></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>▶️ Workflows</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Examples & Use-cases</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Examples & Use-cases</h1></header><p>This example demonstrates a simple workflow that includes shell grains with dependencies.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=complete-examples>Complete examples<a href=#complete-examples class=hash-link aria-label="Direct link to Complete examples" title="Direct link to Complete examples">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-extract-vm-power-state>1. Extract VM power state<a href=#1-extract-vm-power-state class=hash-link aria-label="Direct link to 1. Extract VM power state" title="Direct link to 1. Extract VM power state">​</a></h3>
<p>Simple Workflow example to extract Azure VM power state</p>
<ul>
<li>Gather information about the current power state of Azure VM resources.</li>
<li>This information can be useful for various purposes, such as monitoring, troubleshooting, or automation tasks. By extracting the power state, you can determine whether a VM is running, stopped, or in any other power state, and use this information to make informed decisions or trigger further actions based on the VM's power state.</li>
<li>This workflow provides a convenient way to extract the power state of Azure VM resources and make it available as an output for further processing or integration with other systems.</li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token key atrule" style=color:#00a4db>spec_version</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>description</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Workflow with extract Azure VM power state</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>workflow</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>scope</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> env_resource</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>labels-selector</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> azurerm_linux_virtual_machine </span><span class="token comment" style=color:#999988;font-style:italic># will be available for all azure VM resources type</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>inputs</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>agent</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>type</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> agent</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>default</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> azure</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">agent</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>outputs</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>resource_state</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>value</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ .grains.power-state.activities.deploy.commands.print.outputs.state }}'</span><span class="token plain">  </span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>grains</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>power-state</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>kind</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> shell</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>spec</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>agent</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ .inputs.agent }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>files</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>source</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> scripts</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>path</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> scripts/print</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">resource</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">2.sh</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>activities</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>deploy</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>commands</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> print</span><br></span><span class=token-line style=color:#393A34><span class="token plain">              </span><span class="token key atrule" style=color:#00a4db>command</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">  </span><span class="token string" style=color:#e3116c>'source print-resource-2.sh {{ .bindings.resource_id }} {{ .bindings.grain_path }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">              </span><span class="token key atrule" style=color:#00a4db>outputs</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">                </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> state</span><br></span></code></pre></div></div>
<p><strong>Shell script:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token assign-left variable" style=color:#36acaa>resource_id</span><span class="token operator" style=color:#393A34>=</span><span class="token variable" style=color:#36acaa>$1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token assign-left variable" style=color:#36acaa>grain_path</span><span class="token operator" style=color:#393A34>=</span><span class="token variable" style=color:#36acaa>$2</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token assign-left variable" style=color:#36acaa>contract_path</span><span class="token operator" style=color:#393A34>=</span><span class="token variable" style=color:#36acaa>$CONTRACT_FILE_PATH</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic># will print the attribute "power_state" of the resource</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token assign-left variable" style=color:#36acaa>state_str</span><span class="token operator" style=color:#393A34>=</span><span class="token variable" style=color:#36acaa>$(</span><span class="token variable" style=color:#36acaa>jq </span><span class="token variable parameter variable" style=color:#36acaa>--arg</span><span class="token variable" style=color:#36acaa> ResourceId </span><span class="token variable string" style=color:#e3116c>"</span><span class="token variable string variable" style=color:#36acaa>$resource_id</span><span class="token variable string" style=color:#e3116c>"</span><span class="token variable" style=color:#36acaa> </span><span class="token variable parameter variable" style=color:#36acaa>--arg</span><span class="token variable" style=color:#36acaa> GrainPath </span><span class="token variable string" style=color:#e3116c>"</span><span class="token variable string variable" style=color:#36acaa>$grain_path</span><span class="token variable string" style=color:#e3116c>"</span><span class="token variable" style=color:#36acaa> </span><span class="token variable string" style=color:#e3116c>'.resources[] | select(.identifier == $ResourceId and .grain_path == $GrainPath) | .attributes | .power_state'</span><span class="token variable" style=color:#36acaa> $contract_path</span><span class="token variable" style=color:#36acaa>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style=color:#36acaa>state</span><span class="token operator" style=color:#393A34>=</span><span class="token variable" style=color:#36acaa>`</span><span class="token variable builtin class-name" style=color:#36acaa>echo</span><span class="token variable" style=color:#36acaa> </span><span class="token variable parameter variable" style=color:#36acaa>-n</span><span class="token variable" style=color:#36acaa> $state_tr </span><span class="token variable operator" style=color:#393A34>|</span><span class="token variable" style=color:#36acaa> </span><span class="token variable function" style=color:#d73a49>tr</span><span class="token variable" style=color:#36acaa> </span><span class="token variable parameter variable" style=color:#36acaa>-d</span><span class="token variable" style=color:#36acaa> </span><span class="token variable string" style=color:#e3116c>'"'</span><span class="token variable" style=color:#36acaa>`</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>""</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"extracted values:"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"------------------"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"state: </span><span class="token string variable" style=color:#36acaa>$state</span><span class="token string" style=color:#e3116c>"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"------------------"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>""</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>cat</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$CONTRACT_FILE_PATH</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$state_tr</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token variable" style=color:#36acaa>$state_tr</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-attach-an-ebs-volume-to-an-ec2-instance>2. Attach an EBS volume to an EC2 instance<a href=#2-attach-an-ebs-volume-to-an-ec2-instance class=hash-link aria-label="Direct link to 2. Attach an EBS volume to an EC2 instance" title="Direct link to 2. Attach an EBS volume to an EC2 instance">​</a></h3>
<p>Workflow that attach an EBS volume to an EC2 instance using Ansible grain</p>
<p>Running the "Attach volume to EC2" workflow enables you to enhance the storage capabilities of your EC2 instances, improve data management, and optimize performance, ultimately leading to a more efficient and reliable infrastructure. It provides several benefits:</p>
<ol>
<li><strong>Scalability</strong>: By attaching additional EBS volumes to your EC2 instances, you can increase the storage capacity available to your applications. This allows you to handle larger amounts of data and accommodate growing workloads.</li>
<li><strong>Flexibility</strong>: Attaching EBS volumes gives you the flexibility to store different types of data separately. For example, you can attach a volume specifically for database storage or one for log files. This separation improves organization and makes it easier to manage and troubleshoot your resources.</li>
<li><strong>Data Persistence</strong>: EBS volumes are persistent storage devices, meaning that the data stored on them remains intact even if the EC2 instance is stopped or terminated. This ensures that your valuable data is preserved and can be accessed whenever needed.</li>
<li><strong>High Availability</strong>: By attaching multiple EBS volumes to your EC2 instances, you can distribute your data across different volumes. This improves fault tolerance and ensures that your applications remain available even if one volume fails.</li>
<li><strong>Performance Optimization</strong>: EBS volumes offer different performance characteristics based on their volume types. By attaching volumes with the appropriate performance characteristics, you can optimize the storage performance of your EC2 instances and improve the overall responsiveness of your applications.</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token key atrule" style=color:#00a4db>spec_version</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>description</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Attach an EBS volume to an EC2 instance using Ansible grain</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>workflow</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>scope</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> env_resource</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>labels-selector</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> aws_instance </span><span class="token comment" style=color:#999988;font-style:italic># will be available for all aws ec2 resources type</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>inputs</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>ebs_volume_size</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>type</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> string</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>default</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>device_name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>type</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> string</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>default</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> /dev/sdf</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>volume_type</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>type</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> string</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>default</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> gp3</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>outputs</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>volume_id</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>value</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ .grains.attach_volume.outputs.volume_id }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>quick</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean important" style=color:#36acaa>true</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>volume_name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>value</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ .grains.attach_volume.outputs.volume_name }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>quick</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean important" style=color:#36acaa>true</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>volume_operation_data</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>value</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ .grains.attach_volume.outputs.volume_operation_data }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>quick</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean important" style=color:#36acaa>true</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>grains</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>helper</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>kind</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> shell</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>spec</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>agent</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> cloud</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">agent</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>files</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>source</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> blueprints</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>path</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> blueprints/workflows/scripts/attach</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">detach</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">helper.sh</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>activities</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>deploy</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>commands</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> get</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">outputs</span><br></span><span class=token-line style=color:#393A34><span class="token plain">              </span><span class="token key atrule" style=color:#00a4db>command</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">  </span><span class="token string" style=color:#e3116c>'source attach-detach-helper.sh {{ .bindings.resource_id }} {{ .bindings.grain_path }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">              </span><span class="token key atrule" style=color:#00a4db>outputs</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">                </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> id</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> region</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> availability_zone</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>attach_volume</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>depends-on</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> helper</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>kind</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> ansible</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>spec</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>source</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>store</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> ansible</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>path</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> attach_volume/attach_volume.yml</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>agent</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> cloud</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">agent</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>inputs</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>ec2_instance_id</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ .grains.helper.activities.deploy.commands.get-outputs.outputs.id }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>aws_region</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ .grains.helper.activities.deploy.commands.get-outputs.outputs.region }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>availability_zone</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ .grains.helper.activities.deploy.commands.get-outputs.outputs.availability_zone }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>ebs_volume_size</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ .inputs.ebs_volume_size }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>device_name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ .inputs.device_name }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>volume_type</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ .inputs.volume_type }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>env_id</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ envId }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>volume_name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'ebs-volume-{{ envId }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>env-vars</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>outputs</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> volume_operation_data</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> volume_name</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> volume_id</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>inventory-file</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>localhost</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>hosts</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token key atrule" style=color:#00a4db>127.0.0.1</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">              </span><span class="token key atrule" style=color:#00a4db>ansible_connection</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> local</span><br></span></code></pre></div></div>
<p><strong>Ansible playbook:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>hosts</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> localhost</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>connection</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> local</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>gather_facts</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean important" style=color:#36acaa>false</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>tasks</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Install boto3 python package</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>pip</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> boto3</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic># Create new volume using SSD storage</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Create and attach new EBS volume</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>amazon.aws.ec2_vol</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>instance</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ ec2_instance_id | replace('\n', '') }}"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>region</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ aws_region | replace('\n', '') }}"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>zone</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ availability_zone | replace('\n', '') }}"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>volume_size</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ ebs_volume_size | replace('\n', '') }}"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>device_name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ device_name | replace('\n', '') }}"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>volume_type</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ volume_type | replace('\n', '') }}"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>delete_on_termination</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean important" style=color:#36acaa>true</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic># The volume will be deleted upon instance termination.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>register</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> attached_volume</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Ensure tags are present on a resource</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>amazon.aws.ec2_tag</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>region</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ aws_region | replace('\n', '') }}"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>resource</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ attached_volume.volume_id }}"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>state</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> present</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>tags</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>Name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ volume_name | replace('\n', '') }}"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>env</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> prod</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Export outputs</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>torque.collections.export_torque_outputs</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>outputs</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>volume_name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ volume_name | replace('\n', '') }}"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>volume_id</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ attached_volume.volume_id }}"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>volume_operation_data</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ attached_volume }}"</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=3-detach-an-ebs-volume-from-an-ec2-instance>3. Detach an EBS volume from an EC2 instance<a href=#3-detach-an-ebs-volume-from-an-ec2-instance class=hash-link aria-label="Direct link to 3. Detach an EBS volume from an EC2 instance" title="Direct link to 3. Detach an EBS volume from an EC2 instance">​</a></h3>
<p>Workflow that detach an EBS volume from an EC2 instance using Ansible grain</p>
<p>Running the "Detach an EBS volume from an EC2 instance" workflow helps you optimize costs, manage resources efficiently, enhance data security, and perform maintenance and troubleshooting tasks effectively. It provides several benefits:</p>
<ol>
<li><strong>Cost Optimization</strong>: By detaching unused or unnecessary EBS volumes from EC2 instances, you can reduce storage costs. Detaching volumes that are no longer needed helps to eliminate unnecessary charges and optimize your cloud infrastructure expenses.</li>
<li><strong>Resource Management</strong>: Detaching EBS volumes allows you to efficiently manage your storage resources. By detaching volumes that are not actively being used, you can free up storage capacity and allocate it to other instances or applications that require it. This helps to ensure that your resources are utilized effectively and avoids unnecessary resource wastage.</li>
<li><strong>Data Security</strong>: Detaching EBS volumes from EC2 instances can enhance data security. By detaching volumes before terminating or decommissioning instances, you can ensure that sensitive data stored on those volumes is not accessible to unauthorized users. This helps to protect your data and maintain compliance with security and privacy regulations.</li>
<li><strong>Maintenance and Troubleshooting</strong>: Detaching EBS volumes can be useful for maintenance and troubleshooting purposes. By detaching volumes, you can perform maintenance tasks such as resizing, snapshotting, or modifying volume attributes without impacting the running instances. It also allows you to troubleshoot issues related to specific volumes without affecting the overall availability of your EC2 instances.</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token key atrule" style=color:#00a4db>spec_version</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>description</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Detach an EBS volume from an EC2 instance</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>workflow</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>scope</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> env_resource</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>labels-selector</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> aws_instance</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>inputs</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>volume_id</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>type</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> string</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token key atrule" style=color:#00a4db>grains</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>helper</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>kind</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> shell</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>spec</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>agent</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> cloud</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">agent</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>files</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>source</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> blueprints</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>path</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> blueprints/workflows/scripts/attach</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">detach</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">helper.sh</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>activities</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>deploy</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>commands</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> get</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">outputs</span><br></span><span class=token-line style=color:#393A34><span class="token plain">              </span><span class="token key atrule" style=color:#00a4db>command</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">  </span><span class="token string" style=color:#e3116c>'source attach-detach-helper.sh {{ .bindings.resource_id }} {{ .bindings.grain_path }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">              </span><span class="token key atrule" style=color:#00a4db>outputs</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">                </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> id</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> region</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> availability_zone</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>detach_volume</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>depends-on</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> helper</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>kind</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> ansible</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>spec</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>source</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>store</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> ansible</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>path</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> detach_volume/detach_volume.yml</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>agent</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> cloud</span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain">agent</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>inputs</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>aws_region</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ .grains.helper.activities.deploy.commands.get-outputs.outputs.region }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>volume_id</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'{{ .inputs.volume_id }}'</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>env-vars</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>inventory-file</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>localhost</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">          </span><span class="token key atrule" style=color:#00a4db>hosts</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token key atrule" style=color:#00a4db>127.0.0.1</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">              </span><span class="token key atrule" style=color:#00a4db>ansible_connection</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> local</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p><strong>Ansible playbook:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>---</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>hosts</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> localhost</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>connection</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> local</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>gather_facts</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean important" style=color:#36acaa>false</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>tasks</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Install boto3 python package</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>pip</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> boto3</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic># Detach a volume</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>-</span><span class="token plain"> </span><span class="token key atrule" style=color:#00a4db>name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> Detach a volume</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>amazon.aws.ec2_vol</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>region</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ aws_region | replace('\n', '') }}"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>id</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"{{ volume_id | replace('\n', '') }}"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token key atrule" style=color:#00a4db>instance</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> None</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=data-related-workflows>Data related workflows<a href=#data-related-workflows class=hash-link aria-label="Direct link to Data related workflows" title="Direct link to Data related workflows">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-reset-database-data>1. Reset Database Data<a href=#1-reset-database-data class=hash-link aria-label="Direct link to 1. Reset Database Data" title="Direct link to 1. Reset Database Data">​</a></h3>
<p><strong>Motivation:</strong> Quickly restore databases to a known state for testing or development.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Ensures consistent starting points for tests</li>
<li>Simplifies development environment management</li>
<li>Reduces manual effort in data cleanup</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-drop-tables>2. Drop Tables<a href=#2-drop-tables class=hash-link aria-label="Direct link to 2. Drop Tables" title="Direct link to 2. Drop Tables">​</a></h3>
<p><strong>Motivation:</strong> Efficiently remove unnecessary or outdated tables from databases.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Improves database performance</li>
<li>Reduces storage costs</li>
<li>Simplifies schema management</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=3-create-table>3. Create Table<a href=#3-create-table class=hash-link aria-label="Direct link to 3. Create Table" title="Direct link to 3. Create Table">​</a></h3>
<p><strong>Motivation:</strong> Automate the creation of new database tables for schema updates or initial setup.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Ensures consistency in table creation across environments</li>
<li>Reduces human error in table schema definition</li>
<li>Speeds up database schema evolution</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=4-create-index>4. Create Index<a href=#4-create-index class=hash-link aria-label="Direct link to 4. Create Index" title="Direct link to 4. Create Index">​</a></h3>
<p><strong>Motivation:</strong> Optimize database performance by automating index creation.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Improves query performance</li>
<li>Reduces manual DBA workload</li>
<li>Ensures consistency in index creation across environments</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=ai-related-workflows>AI related workflows<a href=#ai-related-workflows class=hash-link aria-label="Direct link to AI related workflows" title="Direct link to AI related workflows">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-adversarial-robustness-testing>1. Adversarial Robustness Testing<a href=#1-adversarial-robustness-testing class=hash-link aria-label="Direct link to 1. Adversarial Robustness Testing" title="Direct link to 1. Adversarial Robustness Testing">​</a></h3>
<p><strong>Motivation:</strong> Evaluate and improve the resilience of AI models against adversarial attacks.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Enhances model security and reliability</li>
<li>Identifies potential vulnerabilities in AI systems</li>
<li>Improves overall model performance in real-world scenarios</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-data-quality-assurance>2. Data Quality Assurance<a href=#2-data-quality-assurance class=hash-link aria-label="Direct link to 2. Data Quality Assurance" title="Direct link to 2. Data Quality Assurance">​</a></h3>
<p><strong>Motivation:</strong> Ensure the integrity and quality of data used for AI model training and inference.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Improves model accuracy and reliability</li>
<li>Reduces errors caused by poor quality data</li>
<li>Enhances trust in AI-driven decisions</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=3-model-drift-monitoring>3. Model Drift Monitoring<a href=#3-model-drift-monitoring class=hash-link aria-label="Direct link to 3. Model Drift Monitoring" title="Direct link to 3. Model Drift Monitoring">​</a></h3>
<p><strong>Motivation:</strong> Detect and respond to changes in model performance over time due to evolving data patterns.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Maintains model accuracy in production environments</li>
<li>Enables proactive model updates and retraining</li>
<li>Ensures consistent AI performance over time</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=4-model-explainability-and-interpretability>4. Model Explainability and Interpretability<a href=#4-model-explainability-and-interpretability class=hash-link aria-label="Direct link to 4. Model Explainability and Interpretability" title="Direct link to 4. Model Explainability and Interpretability">​</a></h3>
<p><strong>Motivation:</strong> Provide insights into AI model decision-making processes for transparency and compliance.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Increases trust in AI systems</li>
<li>Aids in regulatory compliance (e.g., GDPR)</li>
<li>Facilitates debugging and improvement of AI models</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=5-monitor-inference-accuracy>5. Monitor Inference Accuracy<a href=#5-monitor-inference-accuracy class=hash-link aria-label="Direct link to 5. Monitor Inference Accuracy" title="Direct link to 5. Monitor Inference Accuracy">​</a></h3>
<p><strong>Motivation:</strong> Continuously assess the accuracy of AI model predictions in production environments.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Enables early detection of performance degradation</li>
<li>Facilitates timely model updates or retraining</li>
<li>Ensures consistent quality of AI-driven services</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=6-resource-utilization-monitoring>6. Resource Utilization Monitoring<a href=#6-resource-utilization-monitoring class=hash-link aria-label="Direct link to 6. Resource Utilization Monitoring" title="Direct link to 6. Resource Utilization Monitoring">​</a></h3>
<p><strong>Motivation:</strong> Optimize computational resources used by AI applications for cost-efficiency and performance.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Reduces operational costs of AI systems</li>
<li>Improves overall system performance</li>
<li>Enables efficient scaling of AI applications</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=day2-workflows>Day2 workflows<a href=#day2-workflows class=hash-link aria-label="Direct link to Day2 workflows" title="Direct link to Day2 workflows">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-reboot-instance>1. Reboot Instance<a href=#1-reboot-instance class=hash-link aria-label="Direct link to 1. Reboot Instance" title="Direct link to 1. Reboot Instance">​</a></h3>
<p><strong>Motivation:</strong> Safely restart cloud instances for maintenance or troubleshooting.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Simplifies instance management</li>
<li>Enables automated recovery procedures</li>
<li>Ensures consistent reboot processes across environments</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-generate-temporary-token>2. Generate Temporary Token<a href=#2-generate-temporary-token class=hash-link aria-label="Direct link to 2. Generate Temporary Token" title="Direct link to 2. Generate Temporary Token">​</a></h3>
<p><strong>Motivation:</strong> Create secure, time-limited access tokens for various services.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Enhances security by limiting the lifespan of access tokens</li>
<li>Simplifies temporary access management</li>
<li>Reduces risk of unauthorized access</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=3-service-health-check>3. Service Health Check<a href=#3-service-health-check class=hash-link aria-label="Direct link to 3. Service Health Check" title="Direct link to 3. Service Health Check">​</a></h3>
<p><strong>Motivation:</strong> Proactively monitor and maintain service health.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Early detection of service issues</li>
<li>Reduces downtime through prompt alerts</li>
<li>Enables automated remediation actions</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=4-secret-rotation>4. Secret Rotation<a href=#4-secret-rotation class=hash-link aria-label="Direct link to 4. Secret Rotation" title="Direct link to 4. Secret Rotation">​</a></h3>
<p><strong>Motivation:</strong> Enhance security by regularly updating secrets and credentials.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Reduces risk of compromised credentials</li>
<li>Ensures compliance with security best practices</li>
<li>Automates a typically manual and error-prone process</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=5-add-tags-to-cloud-resource>5. Add Tags to Cloud Resource<a href=#5-add-tags-to-cloud-resource class=hash-link aria-label="Direct link to 5. Add Tags to Cloud Resource" title="Direct link to 5. Add Tags to Cloud Resource">​</a></h3>
<p><strong>Motivation:</strong> Improve organization and management of cloud resources.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Enhances resource tracking and cost allocation</li>
<li>Simplifies resource management at scale</li>
<li>Ensures consistent tagging across the organization</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=kubernetes-related-workflows>Kubernetes related workflows<a href=#kubernetes-related-workflows class=hash-link aria-label="Direct link to Kubernetes related workflows" title="Direct link to Kubernetes related workflows">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-retrieve-pod-logs>1. Retrieve Pod Logs<a href=#1-retrieve-pod-logs class=hash-link aria-label="Direct link to 1. Retrieve Pod Logs" title="Direct link to 1. Retrieve Pod Logs">​</a></h3>
<p><strong>Motivation:</strong> Simplify debugging and monitoring of Kubernetes applications.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Speeds up troubleshooting processes</li>
<li>Enables proactive monitoring</li>
<li>Simplifies log collection for analysis</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-get-configmap-values>2. Get ConfigMap Values<a href=#2-get-configmap-values class=hash-link aria-label="Direct link to 2. Get ConfigMap Values" title="Direct link to 2. Get ConfigMap Values">​</a></h3>
<p><strong>Motivation:</strong> Easily access and verify configuration data in Kubernetes.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Simplifies configuration audits</li>
<li>Aids in troubleshooting configuration-related issues</li>
<li>Enables quick verification of deployed configurations</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=3-get-secrets>3. Get Secrets<a href=#3-get-secrets class=hash-link aria-label="Direct link to 3. Get Secrets" title="Direct link to 3. Get Secrets">​</a></h3>
<p><strong>Motivation:</strong> Securely retrieve and use Kubernetes secrets when needed.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Enhances security by limiting direct access to secrets</li>
<li>Simplifies secret management in automated processes</li>
<li>Enables auditing of secret access</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=4-create-secret>4. Create Secret<a href=#4-create-secret class=hash-link aria-label="Direct link to 4. Create Secret" title="Direct link to 4. Create Secret">​</a></h3>
<p><strong>Motivation:</strong> Automate the process of creating and managing Kubernetes secrets.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Reduces manual errors in secret creation</li>
<li>Enhances security by automating secret management</li>
<li>Simplifies secret creation in CI/CD pipelines</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=5-delete-pod>5. Delete Pod<a href=#5-delete-pod class=hash-link aria-label="Direct link to 5. Delete Pod" title="Direct link to 5. Delete Pod">​</a></h3>
<p><strong>Motivation:</strong> Efficiently manage Kubernetes resources and troubleshoot issues.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Facilitates pod lifecycle management</li>
<li>Aids in resolving pod-related issues</li>
<li>Enables automated pod management in various scenarios</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=6-create-temporary-kubeconfig>6. Create Temporary .kubeconfig<a href=#6-create-temporary-kubeconfig class=hash-link aria-label="Direct link to 6. Create Temporary .kubeconfig" title="Direct link to 6. Create Temporary .kubeconfig">​</a></h3>
<p><strong>Motivation:</strong> Provide secure, time-limited access to Kubernetes clusters.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Enhances cluster security</li>
<li>Simplifies access management for temporary users or processes</li>
<li>Reduces risk of long-lived credentials</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=7-resize-autoscaling-group>7 Resize Autoscaling Group<a href=#7-resize-autoscaling-group class=hash-link aria-label="Direct link to 7 Resize Autoscaling Group" title="Direct link to 7 Resize Autoscaling Group">​</a></h3>
<p><strong>Motivation:</strong> Dynamically adjust cloud resources to meet changing demands.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Optimizes resource utilization and costs</li>
<li>Improves application performance during peak times</li>
<li>Automates capacity management</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=8-argo-cd-sync-application>8. Argo CD Sync Application<a href=#8-argo-cd-sync-application class=hash-link aria-label="Direct link to 8. Argo CD Sync Application" title="Direct link to 8. Argo CD Sync Application">​</a></h3>
<p><strong>Motivation:</strong> Maintain consistency between Git repositories and deployed applications.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Ensures GitOps best practices</li>
<li>Reduces manual intervention in deployment processes</li>
<li>Simplifies application updates and rollbacks</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=torque-built-in-workflows>Torque Built-in Workflows<a href=#torque-built-in-workflows class=hash-link aria-label="Direct link to Torque Built-in Workflows" title="Direct link to Torque Built-in Workflows">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>info</div><div class=admonitionContent_BuS1><p>Usage example can be found <a href=/workflows/workflows-overview#torque-built-in-workflows>here</a></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-aws-ec2-power-management>1. AWS EC2 Power Management<a href=#1-aws-ec2-power-management class=hash-link aria-label="Direct link to 1. AWS EC2 Power Management" title="Direct link to 1. AWS EC2 Power Management">​</a></h3>
<p><strong>Workflows:</strong></p>
<ul>
<li>AWS EC2 Power On</li>
<li>AWS EC2 Power Off</li>
<li>AWS EC2 Restart</li>
</ul>
<p><strong>Motivation:</strong> Efficiently manage EC2 instance power states in Terraform-provisioned AWS environments.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Optimizes resource utilization and costs</li>
<li>Enables scheduled maintenance windows</li>
<li>Facilitates quick recovery from issues through restarts</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-azure-vm-power-management>2. Azure VM Power Management<a href=#2-azure-vm-power-management class=hash-link aria-label="Direct link to 2. Azure VM Power Management" title="Direct link to 2. Azure VM Power Management">​</a></h3>
<p><strong>Workflows:</strong></p>
<ul>
<li>Azure VM Power On</li>
<li>Azure VM Power Off</li>
<li>Azure VM Restart</li>
</ul>
<p><strong>Motivation:</strong> Control power states of Terraform-provisioned Azure virtual machines.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Reduces operational costs during off-hours</li>
<li>Simplifies maintenance procedures</li>
<li>Improves resource management in Azure environments</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=3-netapp-volumes-azure-management>3. NetApp Volumes Azure Management<a href=#3-netapp-volumes-azure-management class=hash-link aria-label="Direct link to 3. NetApp Volumes Azure Management" title="Direct link to 3. NetApp Volumes Azure Management">​</a></h3>
<p><strong>Workflows:</strong></p>
<ul>
<li>NetApp CVO Azure VM Power On</li>
<li>NetApp CVO Azure VM Deallocate</li>
<li>NetApp CVO Azure VM Restart</li>
</ul>
<p><strong>Motivation:</strong> Manage NetApp Cloud Volumes ONTAP VMs in Azure provisioned via Terraform.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Optimizes storage costs and performance</li>
<li>Enables efficient maintenance of NetApp CVO systems</li>
<li>Improves control over specialized storage solutions</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=4-aws-rds-management>4. AWS RDS Management<a href=#4-aws-rds-management class=hash-link aria-label="Direct link to 4. AWS RDS Management" title="Direct link to 4. AWS RDS Management">​</a></h3>
<p><strong>Workflows:</strong></p>
<ul>
<li>AWS RDS Temporary Stop</li>
<li>AWS RDS Delete</li>
<li>AWS RDS Start</li>
</ul>
<p><strong>Motivation:</strong> Control and maintain RDS instances in AWS provisioned through Terraform.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Reduces database costs during non-operational hours</li>
<li>Facilitates database lifecycle management</li>
<li>Enables quick resumption of database services</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=5-azure-database-management>5. Azure Database Management<a href=#5-azure-database-management class=hash-link aria-label="Direct link to 5. Azure Database Management" title="Direct link to 5. Azure Database Management">​</a></h3>
<p><strong>Workflows:</strong></p>
<ul>
<li>Azure MariaDB Delete</li>
<li>Azure MySQL Delete</li>
<li>Azure PostgreSQL Delete</li>
<li>Azure Flexible MySQL Delete</li>
<li>Azure Flexible PostgreSQL Delete</li>
<li>Azure MSSQL Delete</li>
</ul>
<p><strong>Motivation:</strong> Manage lifecycle of various database services in Azure provisioned via Terraform.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Streamlines database resource cleanup</li>
<li>Ensures compliance with data retention policies</li>
<li>Simplifies database environment management</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=6-azure-database-power-management>6. Azure Database Power Management<a href=#6-azure-database-power-management class=hash-link aria-label="Direct link to 6. Azure Database Power Management" title="Direct link to 6. Azure Database Power Management">​</a></h3>
<p><strong>Workflows:</strong></p>
<ul>
<li>Azure MySQL Server Start/Stop</li>
<li>Azure MariaDB Server Start/Stop</li>
<li>Azure Flexible PostgreSQL Server Start/Stop</li>
<li>Azure Flexible MySQL Server Start/Stop</li>
</ul>
<p><strong>Motivation:</strong> Control operational state of various Azure database services provisioned through Terraform.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Optimizes database operational costs</li>
<li>Enables scheduled maintenance windows</li>
<li>Improves overall database resource management</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=7-azure-database-restart-operations>7. Azure Database Restart Operations<a href=#7-azure-database-restart-operations class=hash-link aria-label="Direct link to 7. Azure Database Restart Operations" title="Direct link to 7. Azure Database Restart Operations">​</a></h3>
<p><strong>Workflows:</strong></p>
<ul>
<li>Azure MariaDB Server Restart</li>
<li>Azure MySQL Server Restart</li>
<li>Azure Flexible MySQL Server Restart</li>
<li>Azure Flexible PostgreSQL Server Restart</li>
<li>Azure PostgreSQL Server Restart</li>
</ul>
<p><strong>Motivation:</strong> Perform controlled restarts of Azure database services provisioned via Terraform.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Facilitates quick recovery from database issues</li>
<li>Enables application of updates requiring restarts</li>
<li>Improves database service reliability</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=8-aws-ec2-and-rds-management>8. AWS EC2 and RDS Management<a href=#8-aws-ec2-and-rds-management class=hash-link aria-label="Direct link to 8. AWS EC2 and RDS Management" title="Direct link to 8. AWS EC2 and RDS Management">​</a></h3>
<p><strong>Workflows:</strong></p>
<ul>
<li>AWS EC2 Power On</li>
<li>AWS EC2 Power Off</li>
<li>AWS EC2 Restart</li>
<li>AWS RDS Temporary Stop</li>
<li>AWS RDS Start</li>
</ul>
<p><strong>Motivation:</strong> Manage EC2 and RDS resources in AWS provisioned through CloudFormation.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Provides consistent management across different provisioning methods</li>
<li>Enables power and cost optimization for CloudFormation-deployed resources</li>
<li>Simplifies operational management of AWS resources</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=9-kubernetes-cluster-management>9. Kubernetes Cluster Management<a href=#9-kubernetes-cluster-management class=hash-link aria-label="Direct link to 9. Kubernetes Cluster Management" title="Direct link to 9. Kubernetes Cluster Management">​</a></h3>
<p><strong>Workflows:</strong></p>
<ul>
<li>Azure AKS Pause/Resume</li>
<li>AWS EKS Pause/Resume</li>
</ul>
<p><strong>Motivation:</strong> Control operational state of Kubernetes clusters in Azure (AKS) and AWS (EKS) provisioned via Terraform.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Optimizes costs by pausing clusters during non-operational hours</li>
<li>Facilitates maintenance and upgrades of Kubernetes environments</li>
<li>Improves overall management of containerized applications</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/QualiTorque/torque-docs/tree/master/docs/workflows/workflows-use-cases.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/workflows/workflows-overview><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Torque Workflows</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/governance/roles-and-permissions><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Users, Groups, Roles and Permissions</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#complete-examples class="table-of-contents__link toc-highlight">Complete examples</a><ul><li><a href=#1-extract-vm-power-state class="table-of-contents__link toc-highlight">1. Extract VM power state</a><li><a href=#2-attach-an-ebs-volume-to-an-ec2-instance class="table-of-contents__link toc-highlight">2. Attach an EBS volume to an EC2 instance</a><li><a href=#3-detach-an-ebs-volume-from-an-ec2-instance class="table-of-contents__link toc-highlight">3. Detach an EBS volume from an EC2 instance</a></ul><li><a href=#data-related-workflows class="table-of-contents__link toc-highlight">Data related workflows</a><ul><li><a href=#1-reset-database-data class="table-of-contents__link toc-highlight">1. Reset Database Data</a><li><a href=#2-drop-tables class="table-of-contents__link toc-highlight">2. Drop Tables</a><li><a href=#3-create-table class="table-of-contents__link toc-highlight">3. Create Table</a><li><a href=#4-create-index class="table-of-contents__link toc-highlight">4. Create Index</a></ul><li><a href=#ai-related-workflows class="table-of-contents__link toc-highlight">AI related workflows</a><ul><li><a href=#1-adversarial-robustness-testing class="table-of-contents__link toc-highlight">1. Adversarial Robustness Testing</a><li><a href=#2-data-quality-assurance class="table-of-contents__link toc-highlight">2. Data Quality Assurance</a><li><a href=#3-model-drift-monitoring class="table-of-contents__link toc-highlight">3. Model Drift Monitoring</a><li><a href=#4-model-explainability-and-interpretability class="table-of-contents__link toc-highlight">4. Model Explainability and Interpretability</a><li><a href=#5-monitor-inference-accuracy class="table-of-contents__link toc-highlight">5. Monitor Inference Accuracy</a><li><a href=#6-resource-utilization-monitoring class="table-of-contents__link toc-highlight">6. Resource Utilization Monitoring</a></ul><li><a href=#day2-workflows class="table-of-contents__link toc-highlight">Day2 workflows</a><ul><li><a href=#1-reboot-instance class="table-of-contents__link toc-highlight">1. Reboot Instance</a><li><a href=#2-generate-temporary-token class="table-of-contents__link toc-highlight">2. Generate Temporary Token</a><li><a href=#3-service-health-check class="table-of-contents__link toc-highlight">3. Service Health Check</a><li><a href=#4-secret-rotation class="table-of-contents__link toc-highlight">4. Secret Rotation</a><li><a href=#5-add-tags-to-cloud-resource class="table-of-contents__link toc-highlight">5. Add Tags to Cloud Resource</a></ul><li><a href=#kubernetes-related-workflows class="table-of-contents__link toc-highlight">Kubernetes related workflows</a><ul><li><a href=#1-retrieve-pod-logs class="table-of-contents__link toc-highlight">1. Retrieve Pod Logs</a><li><a href=#2-get-configmap-values class="table-of-contents__link toc-highlight">2. Get ConfigMap Values</a><li><a href=#3-get-secrets class="table-of-contents__link toc-highlight">3. Get Secrets</a><li><a href=#4-create-secret class="table-of-contents__link toc-highlight">4. Create Secret</a><li><a href=#5-delete-pod class="table-of-contents__link toc-highlight">5. Delete Pod</a><li><a href=#6-create-temporary-kubeconfig class="table-of-contents__link toc-highlight">6. Create Temporary .kubeconfig</a><li><a href=#7-resize-autoscaling-group class="table-of-contents__link toc-highlight">7 Resize Autoscaling Group</a><li><a href=#8-argo-cd-sync-application class="table-of-contents__link toc-highlight">8. Argo CD Sync Application</a></ul><li><a href=#torque-built-in-workflows class="table-of-contents__link toc-highlight">Torque Built-in Workflows</a><ul><li><a href=#1-aws-ec2-power-management class="table-of-contents__link toc-highlight">1. AWS EC2 Power Management</a><li><a href=#2-azure-vm-power-management class="table-of-contents__link toc-highlight">2. Azure VM Power Management</a><li><a href=#3-netapp-volumes-azure-management class="table-of-contents__link toc-highlight">3. NetApp Volumes Azure Management</a><li><a href=#4-aws-rds-management class="table-of-contents__link toc-highlight">4. AWS RDS Management</a><li><a href=#5-azure-database-management class="table-of-contents__link toc-highlight">5. Azure Database Management</a><li><a href=#6-azure-database-power-management class="table-of-contents__link toc-highlight">6. Azure Database Power Management</a><li><a href=#7-azure-database-restart-operations class="table-of-contents__link toc-highlight">7. Azure Database Restart Operations</a><li><a href=#8-aws-ec2-and-rds-management class="table-of-contents__link toc-highlight">8. AWS EC2 and RDS Management</a><li><a href=#9-kubernetes-cluster-management class="table-of-contents__link toc-highlight">9. Kubernetes Cluster Management</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Company</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.quali.com/ target=_blank rel="noopener noreferrer" class=footer__link-item>Quali Website<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.quali.com/careers/ target=_blank rel="noopener noreferrer" class=footer__link-item>Careers<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/QualiTorque/torque-docs/discussions target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub Community<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://twitter.com/qualisystems target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.quali.com/blog/ target=_blank rel="noopener noreferrer" class=footer__link-item>Quali blog<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/QualiTorque/torque-docs target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div></div></footer></div>