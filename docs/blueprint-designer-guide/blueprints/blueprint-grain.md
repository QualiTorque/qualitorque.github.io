---
sidebar_position: 27
title: The Blueprint Grain
---

The Blueprint grain allows you to nest an existing blueprint in another blueprint, to be deployed as a grain when the environment is launched.

### source
In __store__, specify the name of the blueprint repository defined in the space.
In __path__, specify ```blueprints/<blueprint file name without ".yaml">```. Alternatively, specify only ```blueprints``` and change the grain name to the blueprint file name without ".yaml".

```yaml
grains:
  nginx:
    kind: blueprint
    spec:
      source:
        store: <space's blueprint repository>
        path: blueprints/<blueprint file name without ".yaml">      
```

Please see [the grain source](/blueprint-designer-guide/blueprints/blueprints-yaml-structure#source) for more details.

### agent
The blueprint grain does not require an agent as Torque uses the agent defined in the referenced blueprint. However, you can specify the agent as an input of ```type: execution-host``` on the blueprint level, and reference it from the grain, both as an input and in the host section.

### inputs
Similar to Terraform inputs and Helm inputs, the Blueprint grain inputs allow you to reuse the same blueprint in different ways using different values overrides. Inputs provided to the Blueprint grain are used when launching the nested blueprint. We recommend using Torque's auto-discovery capability to quickly model your blueprint within Torque including all defined inputs.

Example:

```yaml
grains:
  nginx:
    kind: blueprint
    spec:
      source:
        ...
      inputs:
        - instance_id: '{{ .inputs.instance_id }}'
        - application_port: '{{ .inputs.application_port }}'
```

### outputs 
Output are values generated by the blueprint during the deployment process. 


```yaml 
grains:
  database:
    kind: blueprint
    spec:
      source:
        ...
      outputs:
        - connection_string
```

### Example

```yaml
grains:
  my-nested-blueprint-grain:
    kind: blueprint
    depends-on: infra-grain
    spec: 
      source:
        store: US-space
        path: blueprints/alb-blueprint
      inputs:
        - instance_id: '{{ .inputs.instance_id }}'
        - application_port: '{{ .inputs.application_port }}'
      outputs:
        - connection_string
```