"use strict";(self.webpackChunktorque=self.webpackChunktorque||[]).push([[405],{3905:function(e,t,r){r.d(t,{Zo:function(){return l},kt:function(){return m}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var u=n.createContext({}),a=function(e){var t=n.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},l=function(e){var t=a(e.components);return n.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,i=e.originalType,u=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=a(r),m=o,f=d["".concat(u,".").concat(m)]||d[m]||p[m]||i;return r?n.createElement(f,s(s({ref:t},l),{},{components:r})):n.createElement(f,s({ref:t},l))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=r.length,s=new Array(i);s[0]=d;var c={};for(var u in t)hasOwnProperty.call(t,u)&&(c[u]=t[u]);c.originalType=e,c.mdxType="string"==typeof e?e:o,s[1]=c;for(var a=2;a<i;a++)s[a]=r[a];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},7972:function(e,t,r){r.r(t),r.d(t,{assets:function(){return l},contentTitle:function(){return u},default:function(){return m},frontMatter:function(){return c},metadata:function(){return a},toc:function(){return p}});var n=r(7462),o=r(3366),i=(r(7294),r(3905)),s=["components"],c={sidebar_position:10,title:"Service Accounts"},u=void 0,a={unversionedId:"blueprint-designer-guide/Service Accounts",id:"blueprint-designer-guide/Service Accounts",title:"Service Accounts",description:"A kubernetes service account provides an identity for processes that run in a pod. We recommend using service accounts if you are using a Kubernetes cluster as your execution host.",source:"@site/docs/blueprint-designer-guide/Service Accounts.md",sourceDirName:"blueprint-designer-guide",slug:"/blueprint-designer-guide/Service Accounts",permalink:"/blueprint-designer-guide/Service Accounts",editUrl:"https://github.com/QualiTorque/torque-docs/tree/master/docs/blueprint-designer-guide/Service Accounts.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10,title:"Service Accounts"},sidebar:"torqueSidebar",previous:{title:"Blueprint YAML",permalink:"/blueprint-designer-guide/blueprints"},next:{title:"Terraform Authentication on EKS",permalink:"/blueprint-designer-guide/service-accounts-for-aws"}},l={},p=[{value:"Helm charts",id:"helm-charts",level:2},{value:"Terraform modules",id:"terraform-modules",level:2}],d={toc:p};function m(e){var t=e.components,r=(0,o.Z)(e,s);return(0,i.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"A kubernetes service account provides an identity for processes that run in a pod. We recommend using service accounts if you are using a Kubernetes cluster as your execution host.\nThe service account is specified in the ",(0,i.kt)("strong",{parentName:"p"},"grains")," section of the blueprint, in the ",(0,i.kt)("strong",{parentName:"p"},"hosts")," node:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="Blueprint yaml:"',title:'"Blueprint','yaml:"':!0},"...\ngrains:\n  my-grain-name:\n    kind : terraform \n    spec:\n      ...\n      host:\n        name : <execution-host-name>\n        service-account : <service-account-name>\n      ...\n")),(0,i.kt)("h2",{id:"helm-charts"},"Helm charts"),(0,i.kt)("p",null,"When you're deploying resources in the cluster using a Helm chart, the service account you use should have sufficient permissions to create all the resources which the chart will deploy. For details, see ",(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/access-authn-authz/rbac/#service-account-permissions"},"Kubernetes' Service Account permissions")),(0,i.kt)("h2",{id:"terraform-modules"},"Terraform modules"),(0,i.kt)("p",null,"If you're using an EKS cluster as your execution host, and you want to deploy resources to an AWS account, you need to grant the appropriate AWS permissions to the cluster. "),(0,i.kt)("p",null,"There are two ways to do this. "),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"The easy way is to attach the appropriate policy to the cluster's IAM role Arn, but this grants permissions to the entire cluster. "),(0,i.kt)("li",{parentName:"ol"},"The second option is to use a service account, which grants the permissions to the pod responsible for spinning up the environment, and once the environment is fully deployed, the pod and delegated permissions are removed. For details, see ",(0,i.kt)("a",{parentName:"li",href:"/blueprint-designer-guide/service-accounts-for-aws"},"Terraform Authentication on EKS"),".")))}m.isMDXComponent=!0}}]);