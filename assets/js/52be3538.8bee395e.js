"use strict";(self.webpackChunktorque=self.webpackChunktorque||[]).push([["8373"],{8764:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>s,toc:()=>c,default:()=>u,metadata:()=>o,assets:()=>a,contentTitle:()=>l});var o=JSON.parse('{"id":"eco-system/dev-tools/torque-cli","title":"Torque CLI","description":"This tool streamlines the YAML development process by validating changes in real-time and allowing the execution of test environments directly from the development branch, without needing to first merge the changes to production.","source":"@site/docs/eco-system/dev-tools/torque-cli.md","sourceDirName":"eco-system/dev-tools","slug":"/eco-system/dev-tools/torque-cli","permalink":"/eco-system/dev-tools/torque-cli","draft":false,"unlisted":false,"editUrl":"https://github.com/QualiTorque/torque-docs/tree/master/docs/eco-system/dev-tools/torque-cli.md","tags":[],"version":"current","sidebarPosition":23,"frontMatter":{"sidebar_position":23,"title":"Torque CLI"},"sidebar":"defaultSidebar","previous":{"title":"Service Now","permalink":"/eco-system/itsm-tools/service-now"},"next":{"title":"Torque VSCode plugin","permalink":"/eco-system/dev-tools/vs-plugin"}}'),i=t(4848),r=t(4429);let s={sidebar_position:23,title:"Torque CLI"},l=void 0,a={},c=[{value:"Installation",id:"installation",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Additional environment variables",id:"additional-environment-variables",level:3},{value:"Basic Usage",id:"basic-usage",level:2}];function d(e){let n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"This tool streamlines the YAML development process by validating changes in real-time and allowing the execution of test environments directly from the development branch, without needing to first merge the changes to production."}),"\n",(0,i.jsx)(n.h3,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.p,{children:"There are two ways to use torque-cli:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Install torque-cli as a .NET tool. In this case you need to have dotnet (version 7.0 or higher) installed. To install dotnet, follow the link: ",(0,i.jsx)(n.a,{href:"https://dotnet.microsoft.com/en-us/download",children:"https://dotnet.microsoft.com/en-us/download"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"dotnet tool install -g torque-cli"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Run torque-cli as a docker container:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["docker run -it qtorque/torque-cli",":latest"]}),"\n",(0,i.jsx)(n.p,{children:"To mount your local torque config file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"docker run -it qtorque/torque-cli:latest -v ~/.torque:/root/.torque/ # \n"})}),"\n",(0,i.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.p,{children:"To allow the torque-cli to authenticate with Torque, you must provide several parameters:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.em,{children:"Space"}),": The Torque space to use"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.em,{children:"Repository"}),": (Optional) Represents the name of the git repository containing the bleprints and IaC files that will be used when calling Torque"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.em,{children:"Token"}),": The easiest way to generate a token is via the Torque UI.","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["In your space, go to ",(0,i.jsx)(n.strong,{children:"Settings > Integrations"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Connect"})," under any of the CI tools."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"New Token"})," to get an API token."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Token"}),", ",(0,i.jsx)(n.code,{children:"Space"})," and ",(0,i.jsx)(n.code,{children:"Repository"})," parameters can be provided via a special command line flags (",(0,i.jsx)(n.code,{children:"--token"}),", ",(0,i.jsx)(n.code,{children:"--space"}),", and ",(0,i.jsx)(n.code,{children:"--repo"}),", respectively). You can also conveniently place these parameters in a config file relative to your user folder, so they don't need to be provided each time."]}),"\n",(0,i.jsxs)(n.p,{children:["The config file can be created and managed using the interactive ",(0,i.jsx)(n.code,{children:"torque config"})," command.\nThe CLI supports multiple profiles, and you can switch between them by setting the active profile for ease of use. To use a non-active profile, the ",(0,i.jsx)(n.code,{children:"--profile_"})," command-line flag needs to be used to specify the profile name."]}),"\n",(0,i.jsxs)(n.p,{children:["To add a new profile or update an existing one, run ",(0,i.jsx)(n.code,{children:"torque config set"})," and follow the on-screen directions.\nTo see all profiles, run ",(0,i.jsx)(n.code,{children:"torque config list"})," and the command will output a table of all the profiles that are currently configured."]}),"\n",(0,i.jsx)(n.p,{children:"Example output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ torque config list\n                     Torque user profiles\n\n  Active \u2502 Profile Name \u2502  Space   \u2502 Repository \u2502   Token\n \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n    +    \u2502     demo     \u2502  sample  \u2502            \u2502 ******r-aI\n         \u2502     test     \u2502   dev    \u2502   myrepo   \u2502 ******masd\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If a profile is no longer needed, you can remove it by running: ",(0,i.jsx)(n.code,{children:"torque config remove <profile-name>"})]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"torque config"})," command saves the config file relative to your home user directory ('~/.torque/config.yml' on Mac and Linux or in the '%UserProfile%\\.torque\\config.yaml' file on Windows).\nTo place the config file in a different location, specify that location via an environment variable:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"$ export TORQUE_CONFIG_PATH=/path/to/file"})}),"\n",(0,i.jsx)(n.p,{children:"You can also provide the different parameters as environment variables instead of using the config file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"export TORQUE_TOKEN = xxxzzzyyy\nexport TORQUE_SPACE = demo_space\n# Optional\nexport TORQUE_ACCOUNT = MYACCOUNT\nexport TORQUE_REPO_NAME = my_repo\n"})}),"\n",(0,i.jsx)(n.h3,{id:"additional-environment-variables",children:"Additional environment variables"}),"\n",(0,i.jsx)(n.p,{children:"It is possible to switch the client to a different Torque instance setting custom API endpoint:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'export TORQUE_URL = "https://demo.qtorque.io"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(n.p,{children:"Torque CLI r"}),"\n",(0,i.jsx)(n.p,{children:"There are some basic actions Torque CLI currently allows you to perform:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Validate a blueprint (using the ",(0,i.jsx)(n.code,{children:"torque bp validate"})," command)"]}),"\n",(0,i.jsxs)(n.li,{children:["Get a list of blueprints (via ",(0,i.jsx)(n.code,{children:"torque bp list"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Start an environment (via ",(0,i.jsx)(n.code,{children:"torque env start"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"To see the help files, run:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"$ torque --help"})}),"\n",(0,i.jsx)(n.p,{children:"It will give you detailed output with usage:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"$ torque -h\nUSAGE:\ntorque [OPTIONS] <COMMAND>\n\nEXAMPLES:\ntorque bp get MyBp\ntorque bp list\ntorque env start demo --duration=100 --name=MyDemoEnv\ntorque env get\ntorque env end qwdj4jr9smf\n\nOPTIONS:\n-h, --help       Prints help information\n-v, --version    Prints version information\n\nCOMMANDS:\nblueprint      Get, List, Validate blueprints\nenvironment    Start, End, View Torque environments\nconfig         List, Add and Modify user profiles\nagent          List, associate agents\nspace          Create, delete spaces, connect repo to space\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can get additional help information for a particular command by including  the ",(0,i.jsx)(n.code,{children:"--help"})," flag after the command name, like:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"$ torque env -h\nDESCRIPTION:\nStart, End, View Torque environments.\n\nUSAGE:\n    torque environment [OPTIONS] <COMMAND>\n\nEXAMPLES:\n    torque env start demo --duration=100 --name=MyDemoEnv\n    torque env get\n    torque env end qwdj4jr9smf\n    torque env list --show-ended\n    torque env extend qwdj4jr9smf --duration 120\n\nOPTIONS:\n    -h, --help    Prints help information\n\nCOMMANDS:\n    start <BLUEPRINT-NAME>     Start Environment\n    get <ENVIRONMENT-ID>       Get Environment Details\n    end <ENVIRONMENT-ID>       End Torque Environment\n    list                       List Torque Environment\n    extend <ENVIRONMENT-ID>    Extend Torque Environment\n"})})]})}function u(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},4429:function(e,n,t){t.d(n,{R:()=>s,x:()=>l});var o=t(6540);let i={},r=o.createContext(i);function s(e){let n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);