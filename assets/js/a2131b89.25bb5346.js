"use strict";(self.webpackChunktorque=self.webpackChunktorque||[]).push([["6275"],{551:function(t,e,n){n.r(e),n.d(e,{frontMatter:()=>i,toc:()=>a,default:()=>u,metadata:()=>o,assets:()=>l,contentTitle:()=>c});var o=JSON.parse('{"id":"governance/cost-tracking/configuring-cost-k8s","title":"Configuring Cost for K8s","description":"Torque collects cost data using cost collection targets, which are managed in the Administration page\'s Cloud Accounts tab. For AWS and Azure clouds, you must first add a cost collection target, however for K8s, Torque automatically creates a cost collection target when an agent is installed on the cluster.","source":"@site/docs/governance/cost-tracking/configuring-cost-k8s.md","sourceDirName":"governance/cost-tracking","slug":"/governance/cost-tracking/configuring-cost-k8s","permalink":"/governance/cost-tracking/configuring-cost-k8s","draft":false,"unlisted":false,"editUrl":"https://github.com/QualiTorque/torque-docs/tree/master/docs/governance/cost-tracking/configuring-cost-k8s.md","tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"sidebar_position":14,"title":"Configuring Cost for K8s"},"sidebar":"torqueSidebar","previous":{"title":"Configuring Cost for GCP","permalink":"/governance/cost-tracking/configuring-cost-gcp"},"next":{"title":"Approval Channels","permalink":"/governance/approval-channels"}}'),s=n(4848),r=n(4429);let i={sidebar_position:14,title:"Configuring Cost for K8s"},c=void 0,l={},a=[{value:"Troubleshooting",id:"troubleshooting",level:2}];function d(t){let e={a:"a",blockquote:"blockquote",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:["Torque collects cost data using cost collection targets, which are managed in the ",(0,s.jsx)(e.strong,{children:"Administration"})," page's ",(0,s.jsx)(e.strong,{children:"Cloud Accounts"})," tab. For AWS and Azure clouds, you must first add a cost collection target, however for K8s, Torque automatically creates a cost collection target when an agent is installed on the cluster."]}),"\n",(0,s.jsx)(e.p,{children:"Follow the next steps to start collecting cost on your K8s cluster:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Install Kubecost:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["Torque collects cost data directly from the pods using a 3",(0,s.jsx)("sup",{children:"rd"}),"-party tool called Kubecost. To start collecting costs from your cluster, deploy Kubecost in your cluster.","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["For deployment instructions, see: ",(0,s.jsx)(e.a,{href:"https://www.kubecost.com/install.html#show-instructions",children:"https://www.kubecost.com/install.html#show-instructions"})]}),"\n",(0,s.jsx)(e.li,{children:"Make sure the kubecost default namespace is used (Namespace kubecost)"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Validate the relevant cost collection target:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"Identify the relevant cost collection target. Its name will be the same name as the agent installed on the cluster."}),"\n",(0,s.jsxs)(e.li,{children:["Click the cost collection target's 3 dot menu and select ",(0,s.jsx)(e.strong,{children:"Validate"})," to make sure it works (i.e. cost data can be collected).","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["If validation fails, perform the procedure described in ",(0,s.jsx)(e.a,{href:"#troubleshooting",children:"Troubleshooting"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Enable the relevant cost collection target:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["Go to ",(0,s.jsx)(e.strong,{children:"Administration > Cost > Clouds"}),"."]}),"\n",(0,s.jsxs)(e.li,{children:["Click the desired cost collection target's ",(0,s.jsx)(e.strong,{children:"Enabled"})," toggle."]}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Locale Dropdown",src:n(4209).A+"",width:"1661",height:"748"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["Verify that Kubecost is deployed in the cluster.","\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["Navigate your browser to ",(0,s.jsx)(e.a,{href:"http://localhost:9090/",children:"http://localhost:9090/"}),". If you can see kubecost data, it means it's working. If you can't, see ",(0,s.jsx)(e.a,{href:"https://docs.kubecost.com/troubleshooting/troubleshoot-install",children:"this guide"})," for help."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"In Torque, try to re-enable the K8S cost collection target and validate that it works."}),"\n",(0,s.jsx)(e.li,{children:"If the error still exists, contact Torque support."}),"\n"]})]})}function u(t={}){let{wrapper:e}={...(0,r.R)(),...t.components};return e?(0,s.jsx)(e,{...t,children:(0,s.jsx)(d,{...t})}):d(t)}},4209:function(t,e,n){n.d(e,{A:()=>o});let o=n.p+"assets/images/enable-cost-target-ca68857aa9281721f025a369a7496de8.png"},4429:function(t,e,n){n.d(e,{R:()=>i,x:()=>c});var o=n(6540);let s={},r=o.createContext(s);function i(t){let e=o.useContext(r);return o.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function c(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:i(t.components),o.createElement(r.Provider,{value:e},t.children)}}}]);