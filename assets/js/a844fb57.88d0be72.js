"use strict";(self.webpackChunktorque=self.webpackChunktorque||[]).push([["7069"],{4237:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>l,toc:()=>c,default:()=>u,metadata:()=>t,assets:()=>a,contentTitle:()=>o});var t=JSON.parse('{"id":"torque-agent/agent-requirements","title":"Agent Requirements","description":"The Torque agent is a lightweight, Docker-based execution component that handles environment provisioning and lifecycle management. This page outlines the infrastructure requirements and specifications needed to run the Torque agent.","source":"@site/docs/torque-agent/agent-requirements.md","sourceDirName":"torque-agent","slug":"/torque-agent/agent-requirements","permalink":"/torque-agent/agent-requirements","draft":false,"unlisted":false,"editUrl":"https://github.com/QualiTorque/torque-docs/tree/master/docs/torque-agent/agent-requirements.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Agent Requirements"},"sidebar":"defaultSidebar","previous":{"title":"Install an Agent on your Kubernetes Cluster","permalink":"/torque-agent/Install-and-connect-self-hosted-agent"},"next":{"title":"Agents on AWS","permalink":"/torque-agent/service-accounts-for-aws"}}'),s=r(4848),i=r(4429);let l={sidebar_position:2,title:"Agent Requirements"},o="Agent Requirements",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Minimum Resource Requirements",id:"minimum-resource-requirements",level:2},{value:"Per Agent Instance",id:"per-agent-instance",level:3},{value:"Infrastructure Requirements",id:"infrastructure-requirements",level:2},{value:"Docker Host Deployment",id:"docker-host-deployment",level:3},{value:"Kubernetes Cluster Deployment",id:"kubernetes-cluster-deployment",level:3},{value:"Kubernetes Agent Manifest",id:"kubernetes-agent-manifest",level:2},{value:"Core Components",id:"core-components",level:3},{value:"Agent Permissions",id:"agent-permissions",level:3},{value:"Example Deployment Specification",id:"example-deployment-specification",level:3},{value:"Scaling Considerations",id:"scaling-considerations",level:2},{value:"High Availability",id:"high-availability",level:3},{value:"Workload Capacity",id:"workload-capacity",level:3},{value:"Getting Started",id:"getting-started",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"agent-requirements",children:"Agent Requirements"})}),"\n",(0,s.jsx)(n.p,{children:"The Torque agent is a lightweight, Docker-based execution component that handles environment provisioning and lifecycle management. This page outlines the infrastructure requirements and specifications needed to run the Torque agent."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"The Torque agent can be deployed on two types of infrastructure:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Docker Host"})," - A standalone virtual machine or server running Docker"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Kubernetes Cluster"})," - A managed or self-hosted Kubernetes cluster"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Both deployment models are lightweight and require minimal resources to operate efficiently."}),"\n",(0,s.jsx)(n.h2,{id:"minimum-resource-requirements",children:"Minimum Resource Requirements"}),"\n",(0,s.jsx)(n.h3,{id:"per-agent-instance",children:"Per Agent Instance"}),"\n",(0,s.jsx)(n.p,{children:"The agent requires minimal compute and memory resources:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Resource"}),(0,s.jsx)(n.th,{children:"Minimum"}),(0,s.jsx)(n.th,{children:"Recommended"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CPU"}),(0,s.jsx)(n.td,{children:"100m (0.1 vCPU)"}),(0,s.jsx)(n.td,{children:"200m (0.2 vCPU)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Memory"}),(0,s.jsx)(n.td,{children:"200Mi"}),(0,s.jsx)(n.td,{children:"512Mi"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Storage"}),(0,s.jsx)(n.td,{children:"1GB"}),(0,s.jsx)(n.td,{children:"5GB"})]})]})]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"These requirements are for the agent container itself. Additional resources may be needed for workload execution depending on your blueprint complexity and concurrent environment deployments."})}),"\n",(0,s.jsx)(n.h2,{id:"infrastructure-requirements",children:"Infrastructure Requirements"}),"\n",(0,s.jsx)(n.h3,{id:"docker-host-deployment",children:"Docker Host Deployment"}),"\n",(0,s.jsx)(n.p,{children:"For running the agent on a Docker host, you'll need:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Minimum VM Specifications:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"vCPUs"}),": 2 cores"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Memory"}),": 4GB RAM"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Storage"}),": 20GB disk space"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Operating System"}),": Linux (Ubuntu 20.04+, RHEL 8+, CentOS 8+, Amazon Linux 2)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Docker Version"}),": 20.10 or later"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Network Requirements:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Outbound HTTPS (port 443) access to Torque SaaS"}),"\n",(0,s.jsx)(n.li,{children:"Internet connectivity for pulling Docker images"}),"\n",(0,s.jsxs)(n.li,{children:["See ",(0,s.jsx)(n.a,{href:"/torque-agent/torque-outbound-ports",children:"Torque Outbound Ports"})," for detailed network requirements"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example VM Configuration:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"Instance Type Examples:\n  AWS: t3.medium (2 vCPU, 4GB RAM)\n  Azure: Standard_B2s (2 vCPU, 4GB RAM)\n  GCP: e2-medium (2 vCPU, 4GB RAM)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"kubernetes-cluster-deployment",children:"Kubernetes Cluster Deployment"}),"\n",(0,s.jsx)(n.p,{children:"For running the agent on Kubernetes, you'll need:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Cluster Requirements:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Kubernetes Version"}),": 1.20 or later"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Node Resources"}),": At least one node with 2 vCPUs and 4GB RAM available"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Storage Class"}),": Default storage class configured for persistent volumes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"RBAC"}),": Enabled (required for agent permissions)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Supported Kubernetes Platforms:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Amazon EKS"}),"\n",(0,s.jsx)(n.li,{children:"Azure Kubernetes Service (AKS)"}),"\n",(0,s.jsx)(n.li,{children:"Google Kubernetes Engine (GKE)"}),"\n",(0,s.jsx)(n.li,{children:"Oracle Container Engine for Kubernetes (OKE)"}),"\n",(0,s.jsx)(n.li,{children:"Self-managed Kubernetes clusters"}),"\n",(0,s.jsx)(n.li,{children:"OpenShift"}),"\n",(0,s.jsx)(n.li,{children:"Rancher"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Network Requirements:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Outbound HTTPS (port 443) access to Torque SaaS"}),"\n",(0,s.jsx)(n.li,{children:"Internet connectivity for pulling container images"}),"\n",(0,s.jsxs)(n.li,{children:["See ",(0,s.jsx)(n.a,{href:"/torque-agent/torque-outbound-ports",children:"Torque Outbound Ports"})," for detailed network requirements"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"kubernetes-agent-manifest",children:"Kubernetes Agent Manifest"}),"\n",(0,s.jsx)(n.p,{children:"When deploying to Kubernetes, the agent is installed using a manifest that includes the following components:"}),"\n",(0,s.jsx)(n.h3,{id:"core-components",children:"Core Components"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Namespace"})," - Dedicated namespace for agent isolation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ServiceAccount"})," - Identity for the agent pods"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ClusterRoles"})," - Permissions for cluster-level and namespace-level operations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ClusterRoleBindings"})," - Binding service account to required roles"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Secret"})," - Stores cluster token and logging configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Deployment"})," - Manages agent replicas (default: 2 replicas for high availability)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"agent-permissions",children:"Agent Permissions"}),"\n",(0,s.jsx)(n.p,{children:"The agent requires two sets of permissions:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Cluster-Level Read Permissions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"List storage classes"}),"\n",(0,s.jsx)(n.li,{children:"List namespaces"}),"\n",(0,s.jsx)(n.li,{children:"List service accounts"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Namespace-Level Permissions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Full control over deployments, replicasets, and pods"}),"\n",(0,s.jsx)(n.li,{children:"Manage services, configmaps, secrets"}),"\n",(0,s.jsx)(n.li,{children:"Create and manage persistent volume claims"}),"\n",(0,s.jsx)(n.li,{children:"Manage ingresses and network policies"}),"\n",(0,s.jsx)(n.li,{children:"Access pod logs and events"}),"\n",(0,s.jsx)(n.li,{children:"Execute jobs"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"example-deployment-specification",children:"Example Deployment Specification"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: torque-agent\n  namespace: torque-agent\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: torque-agent\n  template:\n    metadata:\n      labels:\n        app: torque-agent\n    spec:\n      containers:\n      - name: torque-agent-container\n        image: quali/kubernetes-agent:latest\n        imagePullPolicy: IfNotPresent\n        resources:\n          limits:\n            cpu: 100m\n            memory: 200Mi\n          requests:\n            cpu: 100m\n            memory: 200Mi\n        env:\n        - name: AgentSettings__ClusterToken\n          valueFrom:\n            secretKeyRef:\n              name: torque-agent-secret\n              key: cluster-token\n        - name: AgentSettings__ClusterId\n          value: <your-cluster-id>\n        - name: AgentSettings__ServerUrl\n          value: https://<your-torque-instance>/hub/agent\n      serviceAccountName: torque-agent-sa\n"})}),"\n",(0,s.jsx)(n.h2,{id:"scaling-considerations",children:"Scaling Considerations"}),"\n",(0,s.jsx)(n.h3,{id:"high-availability",children:"High Availability"}),"\n",(0,s.jsx)(n.p,{children:"For production deployments, consider:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multiple Replicas"}),": Deploy 2+ agent replicas for redundancy"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Node Distribution"}),": Use pod anti-affinity to distribute replicas across nodes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Resource Limits"}),": Set appropriate limits to prevent resource contention"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"workload-capacity",children:"Workload Capacity"}),"\n",(0,s.jsx)(n.p,{children:"Agent capacity depends on:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Number of concurrent environment deployments"}),"\n",(0,s.jsx)(n.li,{children:"Complexity of blueprints (number of grains, resources)"}),"\n",(0,s.jsx)(n.li,{children:"Duration of provisioning operations"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Scaling Guidelines:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Single agent: 5-10 concurrent environments"}),"\n",(0,s.jsx)(n.li,{children:"Additional replicas: Linear scaling for concurrent capacity"}),"\n",(0,s.jsx)(n.li,{children:"Heavy workloads: Consider dedicated node pools or larger VM instances"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,s.jsx)(n.p,{children:"Once you've prepared your infrastructure, proceed with agent installation:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Docker Host"}),": See ",(0,s.jsx)(n.a,{href:"/torque-agent/torque-docker-agent",children:"Torque Docker Agent"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Kubernetes Cluster"}),": See ",(0,s.jsx)(n.a,{href:"/torque-agent/Install-and-connect-self-hosted-agent",children:"Install and Connect Self-Hosted Agent"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/torque-agent/Torque-Agent-Intro",children:"What is the Torque Agent?"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/torque-agent/advanced-settings",children:"Advanced Agent Settings"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/torque-agent/torque-outbound-ports",children:"Network Requirements"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/torque-agent/torque-agent-on-azure-vmss",children:"Azure VMSS Deployment"})}),"\n"]})]})}function u(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},4429:function(e,n,r){r.d(n,{R:()=>l,x:()=>o});var t=r(6540);let s={},i=t.createContext(s);function l(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);