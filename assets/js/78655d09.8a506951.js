"use strict";(self.webpackChunktorque=self.webpackChunktorque||[]).push([[1033],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return c}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),p=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=p(e.components);return r.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),m=p(n),c=a,g=m["".concat(u,".").concat(c)]||m[c]||d[c]||o;return n?r.createElement(g,i(i({ref:t},s),{},{components:n})):r.createElement(g,i({ref:t},s))}));function c(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8817:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return u},default:function(){return c},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return d}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),i=["components"],l={sidebar_position:5,title:"Auto-generated Blueprints"},u=void 0,p={unversionedId:"blueprint-designer-guide/Autogenerated Blueprints",id:"blueprint-designer-guide/Autogenerated Blueprints",title:"Auto-generated Blueprints",description:"Torque autogenerated blueprints",source:"@site/docs/blueprint-designer-guide/Autogenerated Blueprints.md",sourceDirName:"blueprint-designer-guide",slug:"/blueprint-designer-guide/Autogenerated Blueprints",permalink:"/blueprint-designer-guide/Autogenerated Blueprints",editUrl:"https://github.com/QualiTorque/torque-docs/tree/master/docs/blueprint-designer-guide/Autogenerated Blueprints.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"Auto-generated Blueprints"},sidebar:"torqueSidebar",previous:{title:"The Blueprint Grain",permalink:"/blueprint-designer-guide/blueprints/blueprint-grain"},next:{title:"Blueprint Policies",permalink:"/blueprint-designer-guide/Policies"}},s={},d=[{value:"Torque autogenerated blueprints",id:"torque-autogenerated-blueprints",level:2},{value:"Common fields",id:"common-fields",level:3},{value:"Terraform-specific fields",id:"terraform-specific-fields",level:3},{value:"agent",id:"agent",level:3},{value:"Helm autogenerated blueprints",id:"helm-autogenerated-blueprints",level:3},{value:"Editing auto-generated bluerpints",id:"editing-auto-generated-bluerpints",level:3}],m={toc:d};function c(e){var t=e.components,l=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"torque-autogenerated-blueprints"},"Torque autogenerated blueprints"),(0,o.kt)("p",null,"Torque autogenerates blueprints based on your assets (Terraform modules, Helm Charts). However, you may need to adjust these blueprints to your specific needs. You can modify autogenerated blueprints directly in Torque or in your preferred editor."),(0,o.kt)("h3",{id:"common-fields"},"Common fields"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"spec_version")," should not be changed. "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"description")," may be changed to a better description for your blueprint."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"inputs"),": Torque generates the inputs based on the inputs in your module. The blueprint inputs are presented to the end user when they launch the blueprint, so they can fill out the inputs and/or override any defaults. These inputs will be the module's inputs upon deployment.\nRemove any inputs you don't want to expose in the deployed environment.")),(0,o.kt)("h3",{id:"terraform-specific-fields"},"Terraform-specific fields"),(0,o.kt)("p",null,'Torque currently supports only simple types as blueprint inputs for Terraform (string, boolean and numbers). The inputs that have been autogenerated for you are all "simple type" inputs from your module.'),(0,o.kt)("h3",{id:"agent"},"agent"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"agent"),": The kubernetes execution agent that will deploy the environment.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"outputs"),": Torque generates the outputs based on the outputs of your module. The blueprint's outputs are presented to the end user when they are ready (in the deployed environment).\nRemove any outputs you don't want to expose when the environment is deployed.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"tf-version"),": The terraform version to be used to deploy the module. Change it according to your needs. "))),(0,o.kt)("h3",{id:"helm-autogenerated-blueprints"},"Helm autogenerated blueprints"),(0,o.kt)("p",null,'Torque currently supports only simple types as blueprint inputs for Helm (string, boolean and numbers). The inputs that have been autogenerated for you are all "simple type" inputs from your Helm chart.'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"commands"),': A list of Helm commands to run before installing the chart.\nNo need to specify the Helm command itself.\ne.g, for the command "helm plugin install ',"[options]"," <path|url>... ","[flags]",' " type "plugin install ',"[options]"," <path|url>... ","[flags]",'".\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="For example:"',title:'"For','example:"':!0},"inputs:\n    obj.replicaCount:\n        type: ''\n        display-style: normal\n        default: 1\n")),(0,o.kt)("p",null,"The commands run from the root directory of the repository."),(0,o.kt)("p",null,"You can reference the default ",(0,o.kt)("strong",{parentName:"p"},"values.yaml")," file as ",(0,o.kt)("inlineCode",{parentName:"p"},"{CHART_ROOT_PATH}/values.yaml"),".\nand the ",(0,o.kt)("strong",{parentName:"p"},"override values.yaml")," configured for the blueprints as ",(0,o.kt)("inlineCode",{parentName:"p"},"../values.yaml"),".\n",(0,o.kt)("inlineCode",{parentName:"p"},"({CHART_ROOT_PATH}")," is the location of the chart files within the repo. If it's in the root, just use ",(0,o.kt)("inlineCode",{parentName:"p"},"values.yaml"),")."),(0,o.kt)("p",null,"If you have dependencies, add the command ",(0,o.kt)("inlineCode",{parentName:"p"},"dep up"),"."),(0,o.kt)("h3",{id:"editing-auto-generated-bluerpints"},"Editing auto-generated bluerpints"),(0,o.kt)("p",null,"In this section, we'll learn how to edit our autogenerated blueprints in Torque. While Torque conveniently autogenerates blueprints out of your assets, these blueprints may be missing some minor details, like the cluster namespace and execution agent to use, Terraform version, Helm commands to run, etc."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),(0,o.kt)("strong",{parentName:"h5"},"Note"))),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Torque only saves the latest version. So if you need versioning, you're welcome to add the modified blueprint to your ",(0,o.kt)("strong",{parentName:"p"},"/blueprints")," repository."))),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In the ",(0,o.kt)("strong",{parentName:"p"},"Blueprints"),' page, click the suitable autogenerated blueprint. Autogenerated blueprints have "Torque" as their modifier.  ')),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Make your changes. You can modify the blueprint YAML directly in Torque, or use the ",(0,o.kt)("strong",{parentName:"p"},"Copy")," / ",(0,o.kt)("strong",{parentName:"p"},"Download")," buttons to edit the file using your preferred editor. For details, see ",(0,o.kt)("a",{parentName:"p",href:"/blueprint-designer-guide/Autogenerated%20Blueprints"},"Autogenerated Blueprints"),"."),(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("img",{alt:"Locale Dropdown",src:n(461).Z,width:"1482",height:"352"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Update the blueprint in Torque (if you modified it externally).")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Save Changes"),"."),(0,o.kt)("p",{parentName:"li"},"  Torque validates the blueprint and immediately displays any errors in a tooltip next to the blueprint's name."),(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("img",{alt:"Locale Dropdown",src:n(8071).Z,width:"1027",height:"551"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Launch the blueprint from the ",(0,o.kt)("strong",{parentName:"p"},"Catalog")," to make sure it runs as expected."))))}c.isMDXComponent=!0},8071:function(e,t,n){t.Z=n.p+"assets/images/blueprint-errors-1a865a1b7f11b4c2ad3cd3fd7716dda1.png"},461:function(e,t,n){t.Z=n.p+"assets/images/edit-blueprint-85bfa3118ce2e4df5711ccc9ad4c02eb.png"}}]);