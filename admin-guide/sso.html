<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-admin-guide/sso" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>SSO Configuration | Torque</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://docs.qtorque.io/admin-guide/sso><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="SSO Configuration | Torque"><meta data-rh=true name=description content="With just a few simple steps, your organization’s employees can log into Torque with their corporate accounts using SSO."><meta data-rh=true property=og:description content="With just a few simple steps, your organization’s employees can log into Torque with their corporate accounts using SSO."><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://docs.qtorque.io/admin-guide/sso><link data-rh=true rel=alternate href=https://docs.qtorque.io/admin-guide/sso hreflang=en><link data-rh=true rel=alternate href=https://docs.qtorque.io/admin-guide/sso hreflang=x-default><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://docs.qtorque.io/admin-guide/sso","name":"SSO Configuration","position":1}]}</script><script src=https://cdn.cookielaw.org/consent/31859194-4ed7-4958-bfc5-08046e0f6ab7/OtAutoBlock.js type=text/javascript></script><script src=https://cdn.cookielaw.org/scripttemplates/otSDKStub.js charset=UTF-8 type=text/javascript data-domain-script=31859194-4ed7-4958-bfc5-08046e0f6ab7></script><script src=http://docs.qtorque.io/one-trust.js type=text/javascript></script><link rel=stylesheet href=/assets/css/styles.51ff6c39.css><script src=/assets/js/runtime~main.a355e61e.js defer></script><script src=/assets/js/main.b56dcacd.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.png alt=Torque class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/img/logo-dm.png alt=Torque class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/QualiTorque/torque-docs/discussions/categories/announcements target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-announcments-link"></a><a href=https://github.com/QualiTorque/torque-docs target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class="navbar__search searchBarContainer_NW3z" dir=ltr><input placeholder=Search aria-label=Search class=navbar__search-input value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/>Welcome!</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href="/overview/The Torque Terminology">🌴 Torque Overview</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href="/getting-started/Resources Inventory/Resources-Inventory">🚀 Getting Started</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/environment-services/drift-and-update>🔗 Environment Services</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href="/example-blueprints/Multi-Technology Orchestration">👀 Example Blueprints</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/blueprint-designer-guide/blueprint-quickstart-guide>📃 Blueprint Designer Guide</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/environment-as-code/environment-as-code-overview>☁ Environment As Code</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/workflows/workflows-overview>▶️ Workflows</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/governance/roles-and-permissions>🌍 Governance</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/admin-guide/configurations>⭐ Administration</a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/admin-guide/configurations>Configurations</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/admin-guide/params>Parameters</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/admin-guide/input-sources>Input Sources</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/admin-guide/credentials>Credentials</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/admin-guide/notifications>Notifications</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/admin-guide/source-control/source-control-github>Repository Setup</a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/admin-guide/sso>SSO Configuration</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/eco-system/integrations-overview>🤝 Integrations</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/torque-agent/Torque-Agent-Intro>⚙ Self-Hosted Agent</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/reports/reports-overview>📊 Reports</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/rest-api>🖥 REST API</a><button aria-label="Expand sidebar category '🖥 REST API'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/privacy>🔐 Privacy</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/help/how-to-use-the-kb>🔎 Need Help?</a></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>⭐ Administration</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>SSO Configuration</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>SSO Configuration</h1></header><p>With just a few simple steps, your organization’s employees can log into Torque with their corporate accounts using SSO.</p>
<p>SSO integration provides enhanced security and significant cost-savings as you no longer need to manage your user accounts in Torque and your employees don’t need to remember another set of credentials. Quick, easy and hassle-free.</p>
<p>This is done by integrating your organization's identity provider with Torque's identity management system. Torque uses Okta for identity management and supports integration with all identity providers (IdPs).</p>
<p><strong>In this article:</strong></p>
<ul>
<li><a href=/admin-guide/sso#how-this-works>How this works</a></li>
<li><a href=/admin-guide/sso#integrating-your-idp-with-torque>Integrating your IdP with Torque</a></li>
<li><a href=/admin-guide/sso#associating-a-user-to-multiple-spaces>Associating a user to multiple spaces</a></li>
<li><a href=/admin-guide/sso#mapping-torque-user-groups-to-idp-groups>Mapping Torque user groups to IdP groups</a></li>
<li><a href=/admin-guide/sso#user-provisioning-with-scim>User provisioning with SCIM</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=how-this-works>How this works<a href=#how-this-works class=hash-link aria-label="Direct link to How this works" title="Direct link to How this works">​</a></h2>
<ol>
<li>Your Idp admin creates an application on your IdP that defines the relevant users, as explained in the section below.</li>
<li>We map your IdP's client application to Torque's identity management and provide you with an SSO-enabled account.</li>
<li>A member of your organization uses this account to log in.</li>
<li>The user is redirected to Torque's Corporate Account SSO (Single Sign On) login page.</li>
<li>The user enters their corporate email address and password.</li>
<li>We authenticate the user against your IdP and grant access to Torque.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=integrating-your-idp-with-torque>Integrating your IdP with Torque<a href=#integrating-your-idp-with-torque class=hash-link aria-label="Direct link to Integrating your IdP with Torque" title="Direct link to Integrating your IdP with Torque">​</a></h2>
<ol>
<li>
<p>On your IdP, create a new client application.</p>
</li>
<li>
<p>In the application, do the following:</p>
<ol>
<li>Include the users that will access Torque.</li>
<li>For each user, specify the following:<!-- -->
<ul>
<li><strong>space_name</strong>: Torque Space in which the user will operate.</li>
<li><strong>space_role</strong>: User's role in that space, as defined in <strong>Administration > Roles > Space Roles</strong>. To add a user to multiple spaces, see Associating a user to multiple spaces section below.</li>
<li>(Optional) <strong>timezone</strong> : The user's timezone in IANA format (<a href=https://en.wikipedia.org/wiki/List_of_tz_database_time_zones target=_blank rel="noopener noreferrer">https://en.wikipedia.org/wiki/List_of_tz_database_time_zones</a>)</li>
</ul>
</li>
</ol>
</li>
<li>
<p>Save the application.</p>
</li>
<li>
<p>Copy the relevant details from the application. These may change depending on your IdP - see this Okta help article for details. For example, these are the details for SAML 2.0:</p>
<ul>
<li>IdP Issuer URI</li>
<li>IdP Single Sign-On URL</li>
<li>IdP Signature Certificate</li>
</ul>
</li>
<li>
<p>Go to <strong>Configuration > SSO Login</strong> or go to the Quali Support Center and add a new ticket, requesting SSO integration:</p>
<ol>
<li>Click <strong>+ Add</strong> in the top left corner.</li>
<li>From the <strong>Requester</strong> drop-down list, select <strong>Torque</strong>.</li>
<li>From the <strong>Form</strong> drop-down list, select <strong>Torque Support Request</strong>.</li>
<li>Enter a <strong>Subject</strong>. For example: "SSO integration for Quali", and in the description, request SSO integration, and provide the names of the custom user attributes and the application details.</li>
<li>Click <strong>Submit</strong>.</li>
</ol>
<p>Once SSO integration is set up, the application’s users will be able to use your SSO-enabled account to log in to Torque, as explained in Login to Torque.</p>
</li>
</ol>
<blockquote>
<p>NOTE: When the user first logs in via SSO, Torque sets up the user's profile, including contact details, space associations and space/account role settings. However, it is possible to update the user's profile on subsequent SSO logins as well. For details, contact Torque Support.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=associating-a-user-to-multiple-spaces>Associating a user to multiple spaces<a href=#associating-a-user-to-multiple-spaces class=hash-link aria-label="Direct link to Associating a user to multiple spaces" title="Direct link to Associating a user to multiple spaces">​</a></h2>
<p>You can also add a user to multiple spaces, each with a different role. To do so, provide comma-separated values of the space names and corresponding space roles. For example, you could add a user as Space Member to the Trial space and Space Developer to the DevOps space.</p>
<p><strong>Points to consider:</strong></p>
<ul>
<li>If there are multiple spaces and only one role, reuse that role in all specified spaces.</li>
<li>If there are multiple roles for the same space, use the first valid one.</li>
<li>If the role name is invalid (unknown value in Torque), assign the Space Member role.</li>
<li>If there are more spaces than roles, assign Space Member to the extra spaces.</li>
<li>If there are more roles than spaces, ignore those extra roles.</li>
<li>If the space name is invalid (unknown value in Torque), ignore that space and its corresponding role.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=mapping-torque-user-groups-to-idp-groups>Mapping Torque user groups to IdP groups<a href=#mapping-torque-user-groups-to-idp-groups class=hash-link aria-label="Direct link to Mapping Torque user groups to IdP groups" title="Direct link to Mapping Torque user groups to IdP groups">​</a></h2>
<p>Each group in Torque as an ‘IdP identifier’ field. For SSO users to be assigned to the group automatically, the field must contain the same identifier (usually a GUID) as the group in the IdP (the groups don’t have to have the exact same name)</p>
<p>In Torque, this is can be set by editing a group in the ‘Groups’ page under account settings.</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/groups-1-0ca237dbfe931b1d72926d64745c557f.png width=1317 height=741 class=img_ev3q></p>
</blockquote>
<p>Finding the group identifier in the IdP is specific for each IdP, in the case of Azure active directory, this is the ‘Object Id’ field of a group:</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/groups-2-24c333004e75597b155ff48b18c1c16a.png width=1139 height=690 class=img_ev3q></p>
</blockquote>
<p>For groups that have this field set, users are assigned and unassigned automatically with each login based on the groups they belong to in the IdP.</p>
<p>Users that do not come from an IdP (have a password) or come from an unsupported IdP (all but Okta and Azure AD) can still be added and removed manually from mapped groups.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=configuring-azure-active-directory-entra-to-include-group-information>Configuring Azure active directory (Entra) to include group information.<a href=#configuring-azure-active-directory-entra-to-include-group-information class=hash-link aria-label="Direct link to Configuring Azure active directory (Entra) to include group information." title="Direct link to Configuring Azure active directory (Entra) to include group information.">​</a></h3>
<p>Assuming a working AAD SSO setup, the app in Azure needs to be configured to include the groups additional claim.
In ‘App registration’ find the relevant app and go to Token configuration.
Add the groups claim (using the default settings)</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/groups-3-a5d534be1255f9822e9c24a51e30f39c.png width=1043 height=749 class=img_ev3q></p>
</blockquote>
<p>On the next login, users should be assigned automatically to groups they belong to in Azure and are mapped in Torque (note it sometimes takes a short time before the claims start being sent by AAD after this change)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=troubleshooting>Troubleshooting<a href=#troubleshooting class=hash-link aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h3>
<p>If this doesn't work, it is possible to debug the SSO flow from the browser of an authenticated user.
open the network tab in the development tools of the browser, check the ‘Preserve log’ option or equivalent and perform an SSO login.
one of the calls will be to ‘idp-callback’, inspect the payload of this call.</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/groups-4-144e149032b94d6af53afdbadebfb054.png width=1581 height=946 class=img_ev3q></p>
</blockquote>
<p>The call should contain an id_token field, the contents is a JWT token containing all the claims (user information) sent from the IdP to Torque (through the browser).
Copy the entire contents of this field (without the field name) and paste it into a JWT token decoder (e.d., on <a href=https://jwt.io target=_blank rel="noopener noreferrer">https://jwt.io</a>) to view the contents.</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/groups-5-8222a72aac35d1a5f1912c15f3f128f1.png width=934 height=876 class=img_ev3q></p>
</blockquote>
<p>Verify that group information is being included in a format similar to the above or update the app settings in AAD if it’s missing.</p>
<p>You can also look for log entries 'Valid login through AzureAD Idp detected' that should include information about group Ids received from the IdP.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=configuring-okta-to-include-group-information>Configuring Okta to include group information.<a href=#configuring-okta-to-include-group-information class=hash-link aria-label="Direct link to Configuring Okta to include group information." title="Direct link to Configuring Okta to include group information.">​</a></h3>
<p>Assuming a working Okta configuration, to get group sync working we need to have group information passed to Okta from the IdP and forwarded from it to Torque with each user login.</p>
<p>This document will show how this is done when the IdP behind Okta happens to be Azure AD (in a SAML 2 configuration and not the OIDC/JWT flow as above), but it is probably similar for other IdPs.</p>
<p>When configuring Azure AD to Okta, you usually set custom attribute in the profile editor to match claim coming from the IDP:</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/groups-6-9855c6abaa94cca773e7f70ccdfe0b37.png width=1511 height=784 class=img_ev3q></p>
</blockquote>
<p>Each custom attribute has an ‘external name’:</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/groups-7-57f63152b14aa70341649db95a2509a1.png width=1581 height=844 class=img_ev3q></p>
</blockquote>
<p>Then click ‘edit on ‘attributes & Claims’
The long URLs (claim names) are what you need to set as ‘external name’ in the attribute in Okta.</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/groups-8-3bbe481a63cf9f8119cb648548b521c9.png width=1130 height=853 class=img_ev3q></p>
</blockquote>
<p>On this screen you are also able to have Azure AD send group related information
Click the “+Add a group clam” button and use the default setting.</p>
<p>In Okta, create a new attribute in the profile editor for groups (note the type is string array), the external name might be different from the example below.</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/groups-9-b29746cdfce9d555f01f6ac1f6bb4d61.png width=1130 height=953 class=img_ev3q></p>
</blockquote>
<p>Next, we need to map the groups attribute we just created (that will be filled with group data on login) to a ‘Groups’ field in the user profile that is sent to Torque. Open the ‘mappings’ screen:</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/groups-10-722047899e26e83f56d46cc2191766b3.png width=1342 height=698 class=img_ev3q></p>
</blockquote>
<p>The mapping should include a ‘groups’ field, map to it the attribute we just added (appuser.groups)</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/groups-11-24a368ee71bea925967e5b9456dd99bf.png width=1519 height=456 class=img_ev3q></p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=troubleshooting-1>Troubleshooting<a href=#troubleshooting-1 class=hash-link aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h3>
<p>If groups still don’t get sync automatically after this is done, it is possible to inspect the information sent from a browser of an authenticated user using a SAML inspection addon.</p>
<p>This shows what to expect when using SAML-tracer:</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/groups-12-80fed889d0d17df654fc7c8f80bf5d70.png width=1581 height=1095 class=img_ev3q></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=user-provisioning-with-scim>User provisioning with SCIM<a href=#user-provisioning-with-scim class=hash-link aria-label="Direct link to User provisioning with SCIM" title="Direct link to User provisioning with SCIM">​</a></h2>
<p>Torque supports the SCIM protocol for user provisioning and deprovisioning (group provisioning is currently not supported).
User provisioning is the ability to create and delete users in your Torque account in real-time as they are created and deleted in the IdP (identity provider). When SCIM is configured, an http call will be issued from the IdP to Torque with each new user that is added or removed from the app on the IdP that is used to manage Torque users in the basic SSO process.</p>
<p>User provisioning with SCIM is optional when configuring SSO. When it is not configured, users can still SSO login normally and their Torque user will be created "just in time" at the moment of login. details about the user are updated with each subsequent login. There are advantage to configuring User provisioning though.</p>
<ul>
<li>Users are created in Torque when added in the IdP, potentially before their first log in. - This allows an admin to get a better picture of who are the users in the Torque account and to perform actions on them before the first time they logged in such as already associating them to spaces, setting them as collaborators on some environments and so on.</li>
<li>Users are deprovisioned - Normally, when a user is removed from the IdP, he can no longer login to the Torque account, but the Torque user still appears in the account. Deprovisioning means that one a user cannot SSO into a Torque account, he is removed from it.</li>
</ul>
<p>The process of user provisioning/deprovisioning is one directional. changes to users in Torque do not affect the IdP.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=relation-to-sso>Relation to SSO<a href=#relation-to-sso class=hash-link aria-label="Direct link to Relation to SSO" title="Direct link to Relation to SSO">​</a></h3>
<p>User provisioning (SCIM) is an optional component of SSO and can be omitted, as mentioned above, but when active, it would create a new user in Torque to match a user created or associated in the IdP.
The new user created is considered 'pending', meaning that this user has never actually logged in before and also that the only way for that user to login is via SSO (pending users do not have a password).
When that same user later logins with SSO for the first time, Torque identifies that this is the same user as the one created via provisioning and performs a normal login.
When a user is removed from the IdP, they can no longer login to Torque, if user provisioning was enabled at the time of deletion, then he is deleted from Torque. Regardless, that user can no longer login to the account.
The same app in the IdP is used for both SSO (e.g., using SAML) and for user provisioning.
Note that while SSO is usually</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=configuring-user-provisioning>Configuring user provisioning<a href=#configuring-user-provisioning class=hash-link aria-label="Direct link to Configuring user provisioning" title="Direct link to Configuring user provisioning">​</a></h3>
<p>In order to set up user provisioning with SCIM, the following is needed.</p>
<ul>
<li>SSO is configured and working in the account.</li>
<li>Access to the IdP and app that is used for SSO.</li>
<li>A long token from Torque with the account level permission of "Manage Users" (e.g., a token generated by an account admin)</li>
</ul>
<p>See <a href=/rest-api/torque_api_tokens><strong>Torque API Tokens</strong></a> for generating a token.</p>
<p>The process itself is slightly different for different identity providers, two example are provided below on how to configure SCIM in Okta and in Azure.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=okta>Okta<a href=#okta class=hash-link aria-label="Direct link to Okta" title="Direct link to Okta">​</a></h3>
<p>Login to Okta's admin console and locate the application that is used for SSO with Torque under "Applications" and then "Applications" again under it.
Under the 'General' tab, set the checkbox on "Enable SCIM provisioning"</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/scim-1-4973033ae90ff16119aad1d38ed6da7e.png width=1007 height=713 class=img_ev3q></p>
</blockquote>
<p>This should cause a new tab to appear on the application named "Provisioning". navigate to that tab.
Under the provisioning tab ('Integration' settings) click edit and set the following:
SCIM connector base URL: <a href=https://portal.qtorque.io/api/scim target=_blank rel="noopener noreferrer">https://portal.qtorque.io/api/scim</a>
Unique identifier field for users: userName
Supported provisioning actions: set "Push New Users" and "Push Profile Updates" (the other checkboxes should remain unchecked)
Authentication Mode: HTTP header
Authorization: This field should contain the long token generated above. Do not include word "Bearer" if it appears at the start of the token.</p>
<p>Click "Test connector configuration"
A screen similar to the below should appear.
If the connection is unsuccessful an error message appears with additional details.</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/scim-2-fde259929b303c610398722dac6ef74e.png width=1031 height=817 class=img_ev3q></p>
</blockquote>
<p>Click close on the dialog and "Save" at the button right.</p>
<p>The configured Provisioning screen should appear.</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/scim-3-160ca96e50fa1f47854e7f49d138524c.png width=1024 height=837 class=img_ev3q></p>
</blockquote>
<p>Other related settings should remain at their default settings.</p>
<p>On the left hand side of the screen, under settings, there is a new tab called "To App", navigate to it.
Click 'Edit' under "Provisioning to App" and Enable the checkboxes on "Create Users", "Update user attributes" and "Deactivate users". leave "Sync Password" unchecked. Click Save.</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/scim-4-2cd93084218cddf531cf7d8f3c4197e8.png width=1030 height=860 class=img_ev3q></p>
</blockquote>
<p>At this point, user provisioning should be working. Associate a user to the app normally (under the "Assignments" tab) and observe that it gets created in the Torque account. in case of an error, a red mark will appear next to the user, this links to the "Dashboard" / "Tasks" page where additional information can be found and the operation can be retried.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=azure-active-directory-entra>Azure active directory (Entra)<a href=#azure-active-directory-entra class=hash-link aria-label="Direct link to Azure active directory (Entra)" title="Direct link to Azure active directory (Entra)">​</a></h3>
<p>Login to Azure and navigate to "Enterprise applications", then locate the application used for SSO with your Torque account.
On the left hand side menu pick "Provisioning" and click "Get started"
Set "Provisioning Mode" to Automatic.
Under Admin Credential set the following.
Tenant URL: <a href=https://portal.qtorque.io/api/scim target=_blank rel="noopener noreferrer">https://portal.qtorque.io/api/scim</a>
Secrete Token: This field should contain the long token generated above. Do not include word "Bearer" if it appears at the start of the token.
Click "Test connection" a message should appear on the top right, confirming a successful connection.
If the connection is unsuccessful an error message appears with additional details.</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/scim-5-c081d7b705b14ee7d0aad24bdc92b39d.png width=981 height=734 class=img_ev3q></p>
</blockquote>
<p>Click Save and return to the enterprise application.
Select "Provisioning" again "Provisioning" again under it (or the Edit provisioning button on the overview screen), a similar screen to the one where we enabled provisioning appears.
Expand the "Mappings" section</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/scim-6-bca2dec0702408a3f153119fc77e95f0.png width=1019 height=832 class=img_ev3q></p>
</blockquote>
<p>Click "Provision Microsoft Entra ID Groups". in the screen that appears set "Enabled" to false and click Save.
Click the X at the top right to return to the screen in the screenshot above and observe that 'Enabled' is set to No under "Provision Microsoft Entra ID Groups" (May require a refresh)</p>
<p>Return to the Overview tab and click "Start provisioning"
At this point, user provisioning should be working.
Associate a user to the app normally (under the "Users and groups" tab) and observe that it gets created in the Torque account.</p>
<ul>
<li><strong>Important note</strong>: User provisioning is an offline process in Azure. Changes to user association may take up to 40 minutes to be provisioned. Provisioning logs may also take minutes to show changes.</li>
</ul>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/scim-7-fb044a6a7bf54e0d68d436ce97ad78f5.png width=1134 height=578 class=img_ev3q></p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=configuring-azure-ad-sso-oidc-on-private-saas>Configuring Azure AD SSO (OIDC) on Private SaaS<a href=#configuring-azure-ad-sso-oidc-on-private-saas class=hash-link aria-label="Direct link to Configuring Azure AD SSO (OIDC) on Private SaaS" title="Direct link to Configuring Azure AD SSO (OIDC) on Private SaaS">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=overview>Overview<a href=#overview class=hash-link aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h3>
<p>When users navigate to an instance of the private SaaS application with Azure AD single sign-on (SSO) enabled, they will see a 'Sign in with Azure' button.</p>
<blockquote>
<p><img decoding=async loading=lazy alt="Locale Dropdown" src=/assets/images/aad-sso-8e39d4c4c8b6cf381bbc7fcd8b8e0496.png width=2378 height=848 class=img_ev3q></p>
</blockquote>
<p>Clicking this button will redirect them to the configured Azure AD tenant/app where they will be verified. Upon successful verification, users will be redirected back to the application.</p>
<p>On first login, a new user will be created in the application and assigned to a default space with a pre-configured role. The user can then be assigned additional roles in other spaces for subsequent logins.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=prerequisites>Prerequisites<a href=#prerequisites class=hash-link aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h3>
<ul>
<li>A pre-existing account created with at least one admin user with email login</li>
<li>The application instance is configured for single tenant or private SaaS usage</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=azure-ad-app-registration>Azure AD App Registration<a href=#azure-ad-app-registration class=hash-link aria-label="Direct link to Azure AD App Registration" title="Direct link to Azure AD App Registration">​</a></h3>
<p>In the Azure portal, go to Azure Active Directory > App registrations
Select your app registration and note the Application (client) ID shown under 'Essentials'.</p>
<p>In the app's 'Authentication' section, add a redirect URL matching your application instance URL in the format:
<code>https://your_app_instance.qtorque.io/api/accounts/idp-callback</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=configurations-needed>Configurations needed<a href=#configurations-needed class=hash-link aria-label="Direct link to Configurations needed" title="Direct link to Configurations needed">​</a></h3>
<p>To complete the configuration, once successfully registered an AzureAD application, you'll need to provider the following to your Torque Account Manager/Tech support:</p>
<ul>
<li><code>Tenant ID</code>: Your Azure AD tenant ID</li>
<li><code>Client ID</code>: The client ID of your Azure AD app registration</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=group-synchronization>Group Synchronization<a href=#group-synchronization class=hash-link aria-label="Direct link to Group Synchronization" title="Direct link to Group Synchronization">​</a></h3>
<p>The Azure AD SSO integration supports synchronizing user groups from Azure AD to the application.</p>
<p>See the See <a href=/admin-guide/sso#mapping-torque-user-groups-to-idp-groups><strong>Configuring IdP for Synchronizing User Groups</strong></a> documentation for setup details.</p>
<p>With this configuration, users will be able to seamlessly sign in to your private SaaS application using their Azure AD credentials, with new users automatically provisioned with pre-defined roles and spaces.</p>
<p>The group synchronization feature allows mirroring the group assignment from Azure AD.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/QualiTorque/torque-docs/tree/master/docs/admin-guide/sso.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/admin-guide/source-control/Self Hosted Repositories/self-managed-github"><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Self-Managed GitHub</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/eco-system/integrations-overview><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Integrations Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#how-this-works class="table-of-contents__link toc-highlight">How this works</a><li><a href=#integrating-your-idp-with-torque class="table-of-contents__link toc-highlight">Integrating your IdP with Torque</a><li><a href=#associating-a-user-to-multiple-spaces class="table-of-contents__link toc-highlight">Associating a user to multiple spaces</a><li><a href=#mapping-torque-user-groups-to-idp-groups class="table-of-contents__link toc-highlight">Mapping Torque user groups to IdP groups</a><ul><li><a href=#configuring-azure-active-directory-entra-to-include-group-information class="table-of-contents__link toc-highlight">Configuring Azure active directory (Entra) to include group information.</a><li><a href=#troubleshooting class="table-of-contents__link toc-highlight">Troubleshooting</a><li><a href=#configuring-okta-to-include-group-information class="table-of-contents__link toc-highlight">Configuring Okta to include group information.</a><li><a href=#troubleshooting-1 class="table-of-contents__link toc-highlight">Troubleshooting</a></ul><li><a href=#user-provisioning-with-scim class="table-of-contents__link toc-highlight">User provisioning with SCIM</a><ul><li><a href=#relation-to-sso class="table-of-contents__link toc-highlight">Relation to SSO</a><li><a href=#configuring-user-provisioning class="table-of-contents__link toc-highlight">Configuring user provisioning</a><li><a href=#okta class="table-of-contents__link toc-highlight">Okta</a><li><a href=#azure-active-directory-entra class="table-of-contents__link toc-highlight">Azure active directory (Entra)</a></ul><li><a href=#configuring-azure-ad-sso-oidc-on-private-saas class="table-of-contents__link toc-highlight">Configuring Azure AD SSO (OIDC) on Private SaaS</a><ul><li><a href=#overview class="table-of-contents__link toc-highlight">Overview</a><li><a href=#prerequisites class="table-of-contents__link toc-highlight">Prerequisites</a><li><a href=#azure-ad-app-registration class="table-of-contents__link toc-highlight">Azure AD App Registration</a><li><a href=#configurations-needed class="table-of-contents__link toc-highlight">Configurations needed</a><li><a href=#group-synchronization class="table-of-contents__link toc-highlight">Group Synchronization</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Company</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.quali.com/ target=_blank rel="noopener noreferrer" class=footer__link-item>Quali Website<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.quali.com/careers/ target=_blank rel="noopener noreferrer" class=footer__link-item>Careers<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/QualiTorque/torque-docs/discussions target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub Community<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://twitter.com/qualisystems target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.quali.com/blog/ target=_blank rel="noopener noreferrer" class=footer__link-item>Quali blog<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/QualiTorque/torque-docs target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div></div></footer></div>