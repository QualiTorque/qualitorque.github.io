<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-blueprint-designer-guide/blueprints">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/torque-docs/blog/rss.xml" title="Torque RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/torque-docs/blog/atom.xml" title="Torque Atom Feed"><title data-rh="true">Blueprint YAML | Torque</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/torque-docs/blueprint-designer-guide/blueprints"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Blueprint YAML | Torque"><meta data-rh="true" name="description" content="Torque&#x27;s blueprints are reusable components designed to model a required environment from the infrastructure to the application. Blueprint designers utilize Torque&#x27;s VSCode plugin or the Torque&#x27;s self-service UI to build a YAML based imperative blueprints that aimed to fulfill business requirements in a self-service manner for their end-users."><meta data-rh="true" property="og:description" content="Torque&#x27;s blueprints are reusable components designed to model a required environment from the infrastructure to the application. Blueprint designers utilize Torque&#x27;s VSCode plugin or the Torque&#x27;s self-service UI to build a YAML based imperative blueprints that aimed to fulfill business requirements in a self-service manner for their end-users."><link data-rh="true" rel="icon" href="/torque-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/torque-docs/blueprint-designer-guide/blueprints"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/torque-docs/blueprint-designer-guide/blueprints" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/torque-docs/blueprint-designer-guide/blueprints" hreflang="x-default"><link rel="stylesheet" href="/torque-docs/assets/css/styles.08deea06.css">
<link rel="preload" href="/torque-docs/assets/js/runtime~main.24016d65.js" as="script">
<link rel="preload" href="/torque-docs/assets/js/main.8e52cd89.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/torque-docs/"><div class="navbar__logo"><img src="/torque-docs/img/logo.svg" alt="Torque" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/torque-docs/img/logo.svg" alt="Torque" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a><a class="navbar__item navbar__link navbar__link--active" href="/torque-docs/">Documentation</a><a class="navbar__item navbar__link" href="/torque-docs/blog">Changelog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/QualiTorque/torque-docs/discussions/categories/announcements" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-announcments-link"></a><a href="https://github.com/QualiTorque/torque-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/torque-docs/">Welcome to Torque!</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/torque-docs/getting-started/The Torque Terminology">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/torque-docs/blueprint-designer-guide/blueprints">Blueprint Designer Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/torque-docs/blueprint-designer-guide/blueprints">Blueprint YAML</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/torque-docs/roles-and-permissions">Roles &amp; Permissions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/torque-docs/policies-and-governance/Policies">Policies &amp; Governance</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/torque-docs/cost">Cost Tracking</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/torque-docs/admin-guide/cloud-account">Administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/torque-docs/deployment-architecture/Architecture">Deployment Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/torque-docs/eco-system/integrations-overview">Ecosystem &amp; Integrations</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/torque-docs/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Blueprint Designer Guide</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Blueprint YAML</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Blueprints Design</h1><p>Torque&#x27;s blueprints are reusable components designed to model a required environment from the infrastructure to the application. <strong>Blueprint designers</strong> utilize Torque&#x27;s VSCode plugin or the Torque&#x27;s self-service UI to build a YAML based imperative blueprints that aimed to fulfill business requirements in a self-service manner for their end-users.</p><p>Common example will be a platform team or a DevOps team building Dev, Test and staging environments for their development, QA and product teams. With Torque, the DevOps team can focus on desgin, best practices, and security for environment, while their end users are being self-served from the torque UI, API or eco-system integrations based on governance and policies without having the &#x27;keys-to-the-cloud&#x27;.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="torques-blueprint-yaml">Torque&#x27;s Blueprint YAML<a class="hash-link" href="#torques-blueprint-yaml" title="Direct link to heading">​</a></h2><p>The Torque&#x27;s YAML is a the main specification for blueprint designers to build blueprints out of grains and expose environments to end-users in the Torque&#x27;s catalog. </p><h3 class="anchor anchorWithStickyNavbar_mojV" id="spec_version">spec_version<a class="hash-link" href="#spec_version" title="Direct link to heading">​</a></h3><p>The spec_version determines the blueprint YAML type. Currently, Torque supports spec_version:2 as the default and recommended version. With time, new preview releases and official feature releases will bring more and more features and users will be able to use other spec versions.</p><div class="codeBlockContainer_I0IT language-yaml&quot; theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-yaml&quot; codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec_version: 2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="description">description<a class="hash-link" href="#description" title="Direct link to heading">​</a></h3><p>The blueprint’s description is an optional file but recommended. Blueprint description will be presented in the Torque&#x27;s UI and API so users consuming environment will have more information about the blueprints to batter match their business need to the available set of blueprints published in the account catalog.</p><div class="codeBlockContainer_I0IT language-yaml&quot; theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-yaml&quot; codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">spec_version: 2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">description: Performance testing deployment based on RDS, EKS and Lambda</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="inputs">inputs<a class="hash-link" href="#inputs" title="Direct link to heading">​</a></h3><p>Blueprint designers can expose blueprint inputs to their end-users to add flexibility while launching a new sandbox from the blueprints - without altering the blueprint code itself. Inputs data can be later used in the blueprint to control orchestration, pass information to automation process and more.</p><div class="codeBlockContainer_I0IT language-yaml&quot; theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-yaml&quot; codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">inputs:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  app_version:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type: string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    default: &quot;0.9.9&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    description: &quot;The version of the application to be deployed on the EKS cluster&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="outputs">outputs<a class="hash-link" href="#outputs" title="Direct link to heading">​</a></h3><p>Outputs exposes information about your newly deployed sandbox and make it available for the sandbox consumer or automation processes. Outputs will usually be available at the end of the sandbox initialization and accessible throughout the sandbox lifecycle</p><div class="codeBlockContainer_I0IT language-yaml&quot; theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-yaml&quot; codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">outputs:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  WebsiteUrl:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    value: &#x27;application-name-{{ sandboxid | downcase }}.testquali.click:8080&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    kind: link</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  DB_Hostname:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    value: &#x27;{{ .grains.mySqlDB.outputs.hostname }}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The example above includes some of the Torque&#x27;s YAML templating engine capabilities allowing the blueprint designer more flexibility and leads to less code that will require maintenance. More examples for templating will be described HERE LINK</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="grains">Grains<a class="hash-link" href="#grains" title="Direct link to heading">​</a></h3><p>Grains are the basic building blocks of a blueprint utilizing infrastructure as code (IaC) assets or automation processes to orchestrate the desired environment. In many organization, the blueprint designers will have a predefined set of grains they can use in blueprints provided by the IT/Ops/DevOps or platform team. </p><p>basic grain template is composed out of the grain name, kind, inputs and output. specific grains might support other features that are technology specific.</p><div class="codeBlockContainer_I0IT language-yaml&quot; theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-yaml&quot; codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">grain_name:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    kind: terraform</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      source: </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        path: &lt;path to repository&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      host:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        name: &#x27;{{ .inputs.host_name }}&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      inputs:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - input1: &#x27;{{ .inputs.value1 }}&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - input1: &#x27;{{ .inputs.value2}}&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      outputs:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - output1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - output2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Note that in auto-generated blueprints, the grain_name.spec.host.name is automatically exposed as a blueprint input for the blueprint designer ease of use. As best practice, it&#x27;s recommended to remove the host.name from being an input once the blueprint is exposed to the catalog.</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="grain-source">Grain Source<a class="hash-link" href="#grain-source" title="Direct link to heading">​</a></h3><p>Sources are repositories storing IaC, CM or other configuration technology that will be utilized by Torque to launch and operate an environment. Torque supports multiple ways to define grain sources. </p><h3 class="anchor anchorWithStickyNavbar_mojV" id="grain-host">Grain Host<a class="hash-link" href="#grain-host" title="Direct link to heading">​</a></h3><p>Hosts, or <strong>Execution Hosts</strong> are the locations where grains will be deployed from. While different grains behave differently, it&#x27;s important to choose the right execution host for a grain to make sure authentication, networking and  configuration is all set for sandbox consumers use. Execution Host can be different between grains in the same blueprints to allow maximum flexibility during the orchestration processes.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Hosts gives the flexibility of deploying the same blueprints over different cloud accounts and cloud vendors. For example - the same blueprint can be utilized for Azure or GCP simply by exposing the host as blueprint input allowing the user to choose his favorite cloud provider.</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="grain-inputs--outputs">Grain inputs &amp; outputs<a class="hash-link" href="#grain-inputs--outputs" title="Direct link to heading">​</a></h3><p>Inputs and outputs a used both in the blueprint level and in the grains level. Grains can use inputs and outputs to pass data between IaC components, validate information and eventually lead to reducing the amount of IaC components that needs to be maintained by the organization.</p><p>In the below example, a Terraform deployment generates a connection string to a managed database that can then be utilized by the application itself using the ability to pass output from one grain as a input to the other.</p><div class="codeBlockContainer_I0IT language-yaml&quot; theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-yaml&quot; codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">grains:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # launch an RDS instance using Terraform</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  rds:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    kind: terraform</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      outputs:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - connection_string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  my_app_demo:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Launcing k8s based microservices application using HELM</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    kind: helm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    depends-on: rds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      inputs:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - connectionString: &#x27;{{ .grains.rds.outputs.connection_string }}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="grain-dependencies">Grain dependencies<a class="hash-link" href="#grain-dependencies" title="Direct link to heading">​</a></h3><p>The need to deploy one IaC component before the other is common and usually required when 3rd party components, managed services and other teams need to provide the infrastructure. Using dependencies in the blueprint YAML Torque will evaluate and optimize the deployment process to make sure dependencies are respected and components with no dependencies will be deployed in parallel to maximize efficiency and reduce overall cost.</p><p>In the example below, 3 grain in the bluerpint will be deployed in the following order: rds and redis will be deployed in parallel - and my_app will be deployed next, only in case of a successful deployment.</p><div class="codeBlockContainer_I0IT language-yaml&quot; theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-yaml&quot; codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">grains:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # launch an RDS instance using Terraform</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  rds:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    kind: terraform</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">grains:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # launch an ElastiCache </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  redis:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    kind: terraform</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  my_app_demo:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Launcing k8s based microservices application using HELM</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    kind: helm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    depends-on: rds, redis</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The ability to use outputs from specific grain usually requires the grain deployment to finish successfully. designing a blueprint with output usually requires dependencies between the grains.</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="torque-templating-engine">Torque Templating engine<a class="hash-link" href="#torque-templating-engine" title="Direct link to heading">​</a></h3><p>Templating engines are a great way to enrich the YAML format to allow extensibility points and text manipulations. Torque utilized Shopify&#x27;s <a href="https://shopify.github.io/liquid/" target="_blank" rel="noopener noreferrer">liquid</a> engine to allow multiple text manipulations in runtime.</p><p>In the below example the <a href="https://shopify.github.io/liquid/filters/downcase/" target="_blank" rel="noopener noreferrer">downcase</a> and (strip)<!-- -->[https://shopify.github.io/liquid/filters/strip/]<!-- --> keywords are used with concatenation of the sandbox id to create a new S3 bucket (AWS) using Terraform while making sure the bucket name will be valid and unique.</p><div class="codeBlockContainer_I0IT language-yaml&quot; theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-yaml&quot; codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  s3_bucket:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    kind: terraform</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      source:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        path: s3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      host:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        name: &#x27;{{ .inputs.host_name }}&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      inputs:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        - bucket_name: &#x27;&#x27;{{ .inputs.bucket_name | strip }}&#x27;-bucket-{{ sandboxid | downcase }}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Blueprint designers might need extra details about the account, space or sandbox during the sandbox orchestration. Torque provides dynamic attributes such as a sandboxid, accountid and spaceid that can be used through the orchestration and automation process.   </p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="the-terraform-grain">The Terraform Grain<a class="hash-link" href="#the-terraform-grain" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_mojV" id="the-helm-grain">The HELM Grain<a class="hash-link" href="#the-helm-grain" title="Direct link to heading">​</a></h3></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/blueprint-designer-guide/blueprints.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/torque-docs/getting-started/Service Accounts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Service Accounts</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/torque-docs/roles-and-permissions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Users, Roles and Permissions</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#torques-blueprint-yaml" class="table-of-contents__link toc-highlight">Torque&#39;s Blueprint YAML</a><ul><li><a href="#spec_version" class="table-of-contents__link toc-highlight">spec_version</a></li><li><a href="#description" class="table-of-contents__link toc-highlight">description</a></li><li><a href="#inputs" class="table-of-contents__link toc-highlight">inputs</a></li><li><a href="#outputs" class="table-of-contents__link toc-highlight">outputs</a></li><li><a href="#grains" class="table-of-contents__link toc-highlight">Grains</a></li><li><a href="#grain-source" class="table-of-contents__link toc-highlight">Grain Source</a></li><li><a href="#grain-host" class="table-of-contents__link toc-highlight">Grain Host</a></li><li><a href="#grain-inputs--outputs" class="table-of-contents__link toc-highlight">Grain inputs &amp; outputs</a></li><li><a href="#grain-dependencies" class="table-of-contents__link toc-highlight">Grain dependencies</a></li><li><a href="#torque-templating-engine" class="table-of-contents__link toc-highlight">Torque Templating engine</a></li><li><a href="#the-terraform-grain" class="table-of-contents__link toc-highlight">The Terraform Grain</a></li><li><a href="#the-helm-grain" class="table-of-contents__link toc-highlight">The HELM Grain</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items"><li class="footer__item"><a href="https://www.quali.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Quali Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.quali.com/careers/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/QualiTorque/torque-docs/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/qualisystems" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.quali.com/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Quali blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/torque-docs/assets/js/runtime~main.24016d65.js"></script>
<script src="/torque-docs/assets/js/main.8e52cd89.js"></script>
</body>
</html>